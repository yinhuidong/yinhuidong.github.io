<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>MySQL[一]入门 | 二十</title><meta name="keywords" content="MySQL"><meta name="author" content="二十"><meta name="copyright" content="二十"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="MySQL基本使用">
<meta property="og:type" content="article">
<meta property="og:title" content="MySQL[一]入门">
<meta property="og:url" content="https://yinhuidong.github.io/2022/01/01/MySQL/MySQL[%E4%B8%80]%E5%85%A5%E9%97%A8/index.html">
<meta property="og:site_name" content="二十">
<meta property="og:description" content="MySQL基本使用">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://yinhuidong.github.io/images/cover/mysql.png">
<meta property="article:published_time" content="2021-12-31T16:00:00.000Z">
<meta property="article:modified_time" content="2022-01-12T00:40:35.348Z">
<meta property="article:author" content="二十">
<meta property="article:tag" content="MySQL">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://yinhuidong.github.io/images/cover/mysql.png"><link rel="shortcut icon" href="/img/favicon.jpg"><link rel="canonical" href="https://yinhuidong.github.io/2022/01/01/MySQL/MySQL[%E4%B8%80]%E5%85%A5%E9%97%A8/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":800},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'MySQL[一]入门',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-01-12 08:40:35'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const fontSizeVal = saveToLocal.get('global-font-size')
    if (fontSizeVal !== undefined) {
      document.documentElement.style.setProperty('--global-font-size', fontSizeVal + 'px')
    }
    
    const detectApple = () => {
      if (GLOBAL_CONFIG_SITE.isHome && /iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/css/custom.css"><meta name="referrer" content="no-referrer" /><meta name="generator" content="Hexo 5.4.0"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/head.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">128</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">14</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">13</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/%E5%85%B3%E4%BA%8E%E6%88%91/"><i class="fa-fw fas fa-user"></i><span> 关于我</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/images/cover/mysql.png')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">二十</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/%E5%85%B3%E4%BA%8E%E6%88%91/"><i class="fa-fw fas fa-user"></i><span> 关于我</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">MySQL[一]入门</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2021-12-31T16:00:00.000Z" title="发表于 2022-01-01 00:00:00">2022-01-01</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-01-12T00:40:35.348Z" title="更新于 2022-01-12 08:40:35">2022-01-12</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/MySQL/">MySQL</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">9.7k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>40分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="MySQL[一]入门"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h3 id="一，MYSQL入门"><a href="#一，MYSQL入门" class="headerlink" title="一，MYSQL入门"></a>一，MYSQL入门</h3><h4 id="1-数据库相关概念"><a href="#1-数据库相关概念" class="headerlink" title="1.数据库相关概念"></a>1.数据库相关概念</h4><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">DB：数据库：存储数据的仓库，保存了一系列有组织的数据。</span></span><br><span class="line"><span class="attr">DBMS：数据库管理系统：数据库是通过DBMS创建和操作的容器。</span></span><br><span class="line"><span class="attr">SQL：结构化查询语言：专门用来与数据库通信的语言。</span></span><br></pre></td></tr></table></figure>


<h4 id="2-数据库的好处"><a href="#2-数据库的好处" class="headerlink" title="2.数据库的好处"></a>2.数据库的好处</h4><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">1.可以持久化数据到本地</span></span><br><span class="line"><span class="attr">2.可以实现结构化查询，方便管理</span></span><br></pre></td></tr></table></figure>


<h4 id="3-数据库存储数据特点"><a href="#3-数据库存储数据特点" class="headerlink" title="3.数据库存储数据特点"></a>3.数据库存储数据特点</h4><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">1.将数据放到表中，表放到库中。</span></span><br><span class="line"><span class="attr">2.一个数据库有多张表，每个表都有一个名字，用来标识自己。</span></span><br><span class="line"><span class="attr">表名具有唯一性。</span></span><br><span class="line"><span class="attr">3.表具有一些特性，这些特性定义了数据在表中如何存储，类似Java中类的设计。</span></span><br><span class="line"><span class="attr">4.表有列组成，我们也称为字段。所有表都是由一个列或多个列组成的，</span></span><br><span class="line"><span class="attr">每一列类似Java中的属性。</span></span><br><span class="line"><span class="attr">5.表中的数据按照行来存储，每一行类似于Java中的对象。</span></span><br></pre></td></tr></table></figure>


<h4 id="4-mysql的安装与使用"><a href="#4-mysql的安装与使用" class="headerlink" title="4.mysql的安装与使用"></a>4.mysql的安装与使用</h4><p><strong>参照mysql安装文档</strong></p>
<h4 id="5-Mysql常用命令"><a href="#5-Mysql常用命令" class="headerlink" title="5.Mysql常用命令"></a>5.Mysql常用命令</h4><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">显示数据库-----&gt;show</span> <span class="string">Databases;</span></span><br><span class="line"><span class="meta">使用数据库-----&gt;use</span> <span class="string">数据库名；</span></span><br><span class="line"><span class="meta">显示表----&gt;show</span> <span class="string">tables;</span></span><br><span class="line"><span class="meta">显式指定数据库的表----&gt;show</span> <span class="string">tables from 数据库名；</span></span><br><span class="line"><span class="meta">查看位于那个数据库----&gt;select</span> <span class="string">database();</span></span><br><span class="line"><span class="meta">显示表结构---&gt;desc</span> <span class="string">表名；</span></span><br><span class="line"><span class="meta">查看数据库版本：---&gt;select</span> <span class="string">version();</span></span><br><span class="line"><span class="meta">查看数据库版本2</span>:<span class="string">-----&gt;Dos:mysql --version;</span></span><br><span class="line"><span class="meta">查看数据库信息-----&gt;show</span> <span class="string">CREATE DATABASE mydb1;</span></span><br><span class="line"><span class="meta">查看服务器中的数据库，并把mydb1的字符集修改为utf-8-----&gt;ALTER</span> <span class="string">DATABASE mydb1character set utf8;</span></span><br><span class="line"><span class="meta">删除数据库-----&gt;drop</span> <span class="string">database mydb1;</span></span><br><span class="line"><span class="meta">表中增加一栏信息-----&gt;alter</span> <span class="string">table student add image blob;</span></span><br><span class="line"><span class="meta">删除表-----&gt;drop</span> <span class="string">table student;</span></span><br><span class="line"><span class="meta">修改地址-----&gt;alter</span> <span class="string">table student modify address varchar(100);</span></span><br><span class="line"><span class="meta">删除一个属性-----&gt;</span> <span class="string">alter table student drop image;</span></span><br><span class="line"><span class="meta">修改表名-----&gt;rename</span> <span class="string">table student to students;</span></span><br><span class="line"><span class="meta">查看表的创建细节-----&gt;show</span> <span class="string">create table students;</span></span><br><span class="line"><span class="meta">修改表的字符集为</span> <span class="string">gbk-----&gt;alter table students character set gbk;</span></span><br><span class="line"><span class="meta">列名name修改为studentname-----&gt;alter</span> <span class="string">table students change name studentname varchar(100);</span></span><br></pre></td></tr></table></figure>


<h4 id="6-mysql语法规范"><a href="#6-mysql语法规范" class="headerlink" title="6.mysql语法规范"></a>6.mysql语法规范</h4><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">1.不区分大小写，建议关键字大写，表名列名小写。</span></span><br><span class="line"><span class="attr">2.每条命令最好用分号结尾。</span></span><br><span class="line"><span class="attr">3.每条语句可以缩进，换行。</span></span><br><span class="line"><span class="attr">4.注释</span></span><br><span class="line"><span class="attr">单行注释：#注释文字</span></span><br><span class="line">          <span class="meta">--</span> <span class="string">注释文字</span></span><br><span class="line"><span class="meta">多行注释：/*</span> <span class="string">*/</span></span><br></pre></td></tr></table></figure>


<h3 id="二，DQL查询语言"><a href="#二，DQL查询语言" class="headerlink" title="二，DQL查询语言"></a>二，DQL查询语言</h3><h4 id="1-基础查询"><a href="#1-基础查询" class="headerlink" title="1.基础查询"></a>1.基础查询</h4><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">**语法：</span> <span class="string">select 查询列表 from 表名**</span></span><br><span class="line"></span><br><span class="line"><span class="attr">**查询列表：表中的字段，常量，表达式，函数**</span></span><br><span class="line"></span><br><span class="line"><span class="attr">**查询的结果是张虚拟的表格**</span></span><br><span class="line"></span><br><span class="line"><span class="attr">1.查询表中的单个字段</span></span><br><span class="line"></span><br><span class="line"><span class="attr">select</span> <span class="string">last_name from employee;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">2.查询表中的多个字段</span></span><br><span class="line"></span><br><span class="line"><span class="attr">select</span> <span class="string">last_name,salary,email from employee;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">3.查询表中的所有字段</span></span><br><span class="line"></span><br><span class="line"><span class="attr">select</span> <span class="string">* from employee;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">4.查询常量值</span></span><br><span class="line"></span><br><span class="line"><span class="attr">select</span> <span class="string">100;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">select</span> <span class="string">&#x27;john&#x27;;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">5.查询表达式</span></span><br><span class="line"></span><br><span class="line"><span class="attr">select</span> <span class="string">100*98;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">6.查询函数</span></span><br><span class="line"></span><br><span class="line"><span class="attr">select</span> <span class="string">version();</span></span><br><span class="line"></span><br><span class="line"><span class="attr">7.起别名</span></span><br><span class="line"></span><br><span class="line"><span class="attr">select</span> <span class="string">last_name as name from employee;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">select</span> <span class="string">last_name name from employee;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">8.去重</span></span><br><span class="line"></span><br><span class="line"><span class="attr">查询员工表中涉及到的所有的部门编号</span></span><br><span class="line"></span><br><span class="line"><span class="attr">select</span> <span class="string">distinct department_id from employee;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">9.+的作用</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">#运算符：两个操作数都为数值型，则做加法运算；</span></span><br><span class="line"><span class="comment">#其中一方为字符型，试图将字符型数值转换成数值型，</span></span><br><span class="line"><span class="comment">#如果转换成功，继续做加法运算；否则，将字符型数值</span></span><br><span class="line"><span class="comment">#转换为0；</span></span><br><span class="line"></span><br><span class="line"><span class="attr">10.使用concat实现连接</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">#案例：查询员工名和性连接成一个字段</span></span><br><span class="line"></span><br><span class="line"><span class="attr">SELECT</span> <span class="string">CONCAT(username,PASSWORD) FROM USER;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">#任何数与null做运算结果都为null</span></span><br></pre></td></tr></table></figure>


<h4 id="2-条件查询"><a href="#2-条件查询" class="headerlink" title="2.条件查询"></a>2.条件查询</h4><p><strong>语法：</strong></p>
<p><strong>select 查询列表 from 表名 where 筛选条件</strong></p>
<p><strong>分类：</strong></p>
<h5 id="①按照条件表达式筛选"><a href="#①按照条件表达式筛选" class="headerlink" title="①按照条件表达式筛选"></a>①按照条件表达式筛选</h5><p>条件运算符：&gt;,&lt;,=,!=,&gt;=,&lt;=</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="attr">查询员工工资&gt;1w2的员工信息</span></span><br><span class="line"><span class="attr">select</span> <span class="string">* from employee where salary &gt;12000;</span></span><br><span class="line"><span class="meta">查询部门编号！</span>=<span class="string">90号的员工名和部门编号</span></span><br><span class="line"><span class="attr">select</span> <span class="string">name, dep_id from employee where  dep_id 1=90；</span></span><br></pre></td></tr></table></figure>


<h5 id="②按照逻辑表达式筛选"><a href="#②按照逻辑表达式筛选" class="headerlink" title="②按照逻辑表达式筛选"></a>②按照逻辑表达式筛选</h5><p>逻辑运算符：&amp;&amp;,||,!,AND,OR,NOT</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">查询工资在一万到两万之见的员工名，工资以及奖金。</span></span><br><span class="line"><span class="attr">select</span> <span class="string">name,salary ,jiangjin where salary between 10000 and 20000;</span></span><br><span class="line"><span class="attr">查询部门编号不在90-110之间，或者工资高于15000的员工信息。</span></span><br><span class="line"><span class="attr">select</span>  <span class="string">* from employee where department&lt;90||department&gt;110 ||salary &gt;15000;</span></span><br></pre></td></tr></table></figure>


<h5 id="③模糊查询"><a href="#③模糊查询" class="headerlink" title="③模糊查询"></a>③模糊查询</h5><p>like：一般和通配符搭配使用<br>通配符：<br>%任意多个字符，包含0个字符<br>_任意单个字符<br>BETWEEN AND:包含临界值<br>IN:判断某个字段的值是否属于in列表中的某一项<br>IS NULL,IS NOT NULL:=或者！=不能用来判断null<br>安全等于&lt;=&gt;可以判断null</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">查询员工名中包含a的员工信息</span></span><br><span class="line"><span class="attr">select</span> <span class="string">* from emp where name like %a%;</span></span><br><span class="line"><span class="attr">查询员工名中第三个字符为e第五个字符为a的员工名和工资</span></span><br><span class="line"><span class="attr">select</span> <span class="string">name ,salary from emp where name like %__e_a%;</span></span><br><span class="line"><span class="attr">员工名中第二个字符为_的员工名</span></span><br><span class="line"><span class="attr">select</span> <span class="string">name from emp where name like %_\_%;</span></span><br><span class="line"><span class="attr">查询员工编号在100到120之间的所有员工信息</span></span><br><span class="line"><span class="attr">select</span> <span class="string">* from emp where id between 100 and 120;</span></span><br><span class="line"><span class="attr">查询员工的工种编号是IT_PRIG,AD_PRES,AD_VP中的一个员</span></span><br><span class="line"><span class="attr">工名和工种编号；</span></span><br><span class="line"><span class="attr">select</span> <span class="string">name , id from emp where id in(IT_PRIG,AD_PRES,AD_VP);</span></span><br><span class="line"><span class="attr">查询没有奖金的员工名和奖金率</span></span><br><span class="line"><span class="attr">select</span> <span class="string">salary , jjl from emp where salary is Null;</span></span><br><span class="line"><span class="attr">查询有奖金的员工名和奖金率</span></span><br><span class="line"><span class="attr">select</span> <span class="string">salary ,jjl from emp where salary is not null;</span></span><br></pre></td></tr></table></figure>


<h5 id="④IF-null的使用："><a href="#④IF-null的使用：" class="headerlink" title="④IF null的使用："></a>④IF null的使用：</h5><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">查询员工号为176的员工的姓名和部门号和年薪</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string">last_name ,department_id , salary*(1+IFNULL(commission_pct,0))*12 &#x27;年薪&#x27;</span></span><br><span class="line"><span class="attr">FROM</span> <span class="string">employees WHERE employee_id =176;</span></span><br></pre></td></tr></table></figure>


<h4 id="3-排序查询"><a href="#3-排序查询" class="headerlink" title="3.排序查询"></a>3.排序查询</h4><p><strong>语法：</strong></p>
<p><strong>select   查询列表</strong></p>
<p><strong>from 表</strong></p>
<p><strong>where 筛选条件</strong></p>
<p><strong>order by 排序列表 asc 或desc （升序或者降序，默认为升序）</strong></p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">查询员工信息，要求工资从高到低排序</span></span><br><span class="line"><span class="attr">select</span> <span class="string">* from emp order by salary desc;</span></span><br><span class="line"><span class="attr">查询部门编号大于等于90的员工信息，按照入职时间先后排序</span></span><br><span class="line"><span class="attr">select</span> <span class="string">* from emp where dep_id &gt;=90 order by createtime asc;</span></span><br><span class="line"><span class="attr">按照员工年薪的高低显示员工的信息和年薪</span></span><br><span class="line"><span class="attr">select</span> <span class="string">* ,年薪 from emp  order by salary*(1+if null(jjl,0))*12 as 年薪 desc;</span></span><br><span class="line"><span class="attr">按姓名长度显示员工的姓名和工资</span></span><br><span class="line"><span class="attr">select</span> <span class="string">name ,salary from emp order by length(name) asc;</span></span><br><span class="line"><span class="attr">查询员工信息，先按照工资排序，再按照员工编号排序</span></span><br><span class="line"><span class="attr">select</span> <span class="string">* from emp  order by salary asc,id asc;</span></span><br></pre></td></tr></table></figure>


<h4 id="4-常见函数"><a href="#4-常见函数" class="headerlink" title="4.常见函数"></a>4.常见函数</h4><p><strong>功能：类似Java中的方法</strong><br><strong>分类：单行函数</strong><br><strong>分组函数</strong></p>
<h5 id="1-单行函数"><a href="#1-单行函数" class="headerlink" title="1.单行函数"></a>1.单行函数</h5><h6 id="1-字符函数"><a href="#1-字符函数" class="headerlink" title="1.字符函数"></a>1.字符函数</h6><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">1.length</span> <span class="string">获取参数值的字节个数</span></span><br><span class="line"><span class="attr">select</span> <span class="string">* from emp order by length(name);</span></span><br><span class="line"><span class="meta">2.concat</span> <span class="string">拼接字符串</span></span><br><span class="line"><span class="attr">select</span> <span class="string">concat(last_name,first_name) as 姓名 from emp;</span></span><br><span class="line"><span class="meta">3.upper，lower</span> <span class="string">大小写转换函数</span></span><br><span class="line"><span class="attr">案例：将姓变大写，名字变小写，然后拼接</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string"></span></span><br><span class="line"><span class="attr">CONCAT(UPPER(last_name),LOWER(first_name))</span></span><br><span class="line"><span class="attr">FROM</span> <span class="string">employees;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">4.substr,SUBSTRING</span> <span class="string">截取字符串</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string">SUBSTR(&#x27;李莫愁&#x27;,2);</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string">SUBSTR(&#x27;李莫愁&#x27;,2,3);</span></span><br><span class="line"><span class="attr">案例：姓名中首字符大写，其他的小写然后用_拼接显示出来</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string"></span></span><br><span class="line">  <span class="attr">CONCAT(</span></span><br><span class="line">    <span class="meta">UPPER(SUBSTR(last_name,</span> <span class="string">1, 1)),</span></span><br><span class="line">    <span class="attr">&#x27;_&#x27;,</span></span><br><span class="line">    <span class="meta">LOWER(SUBSTR(last_name,</span> <span class="string">2))</span></span><br><span class="line">  <span class="meta">)</span> <span class="string">output </span></span><br><span class="line"><span class="attr">FROM</span></span><br><span class="line">  <span class="attr">employees</span> <span class="string">;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">5.instr</span>:<span class="string">返回字串第一次出现的索引，如果找不到返回0</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string">INSTR(&#x27;风急天高猿啸哀&#x27;,&#x27;天&#x27;) AS out_put;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">6.trim</span> :<span class="string">去掉前后空格或前后指定字符</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string">LENGTH(TRIM(&#x27;   张三丰   &#x27;)) AS out_put;</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string">TRIM(&#x27;a&#x27; FROM &#x27;aaaa1aa2aaa3aaa&#x27;) AS out_put;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">7.lpad</span> :<span class="string">用指定字符填满指定长度（左填充）</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string">LPAD(&#x27;苍老师&#x27;,10,&#x27;*&#x27;);</span></span><br><span class="line"></span><br><span class="line"><span class="meta">8.rpad</span>:<span class="string">用指定字符填满指定长度（右填充）</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string">RPAD(&#x27;苍老师&#x27;,10,&#x27;*&#x27;);</span></span><br><span class="line"></span><br><span class="line"><span class="meta">9.replace</span> <span class="string">替换</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string">REPLACE(&#x27;千锋培训机构&#x27;,&#x27;千锋&#x27;,&#x27;尚硅谷&#x27;);</span></span><br></pre></td></tr></table></figure>


<h6 id="2-数学函数"><a href="#2-数学函数" class="headerlink" title="2.数学函数"></a>2.数学函数</h6><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">1.round</span>:<span class="string">四舍五入</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string">ROUND(1.666);</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string">ROUND(1.567,2);</span></span><br><span class="line"><span class="meta">2.ceil</span> <span class="string">向上取整</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string">CEIL(1.52);</span></span><br><span class="line"><span class="meta">3.floor</span> <span class="string">向下取整</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string">FLOOR(1.52);</span></span><br><span class="line"><span class="meta">4.truncate</span>:<span class="string">截断（小数点后保留几位）</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string">TRUNCATE(1.65,2);</span></span><br><span class="line"><span class="meta">5.mod</span>:<span class="string">取余</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string">MOD(10,3);</span></span><br></pre></td></tr></table></figure>


<h6 id="3-日期函数"><a href="#3-日期函数" class="headerlink" title="3.日期函数"></a>3.日期函数</h6><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">1.now</span>:<span class="string">返回当前系统日期时间</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string">NOW();</span></span><br><span class="line"></span><br><span class="line"><span class="meta">2.curdate</span>:<span class="string">返回当前系统日期</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string">CURDATE();</span></span><br><span class="line"></span><br><span class="line"><span class="meta">3.curtime</span>:<span class="string">返回当前时间</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string">CURTIME();</span></span><br><span class="line"></span><br><span class="line"><span class="attr">4.获取指定部分的年月日时分秒</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string">YEAR(NOW());</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string">YEAR(hiredate) FROM employees;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">5.str_to_date将字符通过指定的格式转化成日期</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string">STR_TO_DATE(&#x27;1998-3-2&#x27;,&#x27;%Y-%c-%d&#x27;) AS out_put;</span></span><br><span class="line"><span class="attr">案例：查询入职时间为1992-4-3的员工信息</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string">* FROM employees</span></span><br><span class="line"><span class="attr">WHERE</span> <span class="string">hiredate=STR_TO_DATE(&#x27;2016-3-3&#x27;,&#x27;%Y-%c-%d&#x27;);</span></span><br><span class="line"></span><br><span class="line"><span class="meta">6.date_format</span> <span class="string">将日期转换成字符</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string">DATE_FORMAT(NOW(),&#x27;%y年%m月%d日&#x27;) AS 日期;</span></span><br><span class="line"><span class="meta">案例：查询有奖金的员工名和入职日期（xx月/xx日</span> <span class="string">xx年）</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string"></span></span><br><span class="line">  <span class="attr">last_name,</span></span><br><span class="line">  <span class="meta">DATE_FORMAT(hiredate,</span> <span class="string">&#x27;%c月/%d日 %y&#x27;) </span></span><br><span class="line"><span class="attr">FROM</span></span><br><span class="line">  <span class="attr">employees</span> <span class="string"></span></span><br><span class="line"><span class="attr">WHERE</span> <span class="string">commission_pct IS NOT NULL ;</span></span><br></pre></td></tr></table></figure>


<h6 id="4-其他函数"><a href="#4-其他函数" class="headerlink" title="4.其他函数"></a>4.其他函数</h6><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">SELECT</span> <span class="string">VERSION();</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string">DATABASE();</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string">USER();</span></span><br></pre></td></tr></table></figure>


<h6 id="5-流程控制函数"><a href="#5-流程控制函数" class="headerlink" title="5.流程控制函数"></a>5.流程控制函数</h6><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">1.if</span>:<span class="string">IF else效果</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string">IF(10&gt;5,&#x27;true&#x27;,&#x27;false&#x27;);</span></span><br><span class="line"><span class="attr">案例：查询如果有奖金就备注有，没有就备注没有。</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string"></span></span><br><span class="line">  <span class="attr">last_name,</span></span><br><span class="line">  <span class="attr">commission_pct,</span></span><br><span class="line">  <span class="attr">IF(</span></span><br><span class="line">    <span class="attr">commission_pct</span> <span class="string">IS NULL,</span></span><br><span class="line">    <span class="attr">&#x27;没奖金&#x27;,</span></span><br><span class="line">    <span class="attr">&#x27;有奖金&#x27;</span></span><br><span class="line">  <span class="meta">)</span> <span class="string">AS 备注 </span></span><br><span class="line"><span class="attr">FROM</span></span><br><span class="line">  <span class="attr">employees</span> <span class="string">;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">2.case函数</span></span><br><span class="line"><span class="attr">1)switch-CASE</span></span><br><span class="line"><span class="meta">语法</span>:<span class="string"></span></span><br><span class="line"><span class="attr">CASE</span> <span class="string">要判断的字段或者表达式</span></span><br><span class="line"><span class="attr">WHEN</span> <span class="string">常量1 THEN 要显示的值1或者语句1</span></span><br><span class="line"><span class="attr">WHEN</span> <span class="string">常量2 THEN 要显示的值2或者语句2</span></span><br><span class="line"><span class="attr">...</span></span><br><span class="line"><span class="attr">ELSE</span> <span class="string">要显示的值n或者语句n；</span></span><br><span class="line"><span class="attr">案例：查询员工的工资，要求</span></span><br><span class="line"><span class="meta">部门号</span>=<span class="string">=30，显示的工资为1.1倍，</span></span><br><span class="line"><span class="meta">部门号</span>=<span class="string">=40，显示的工资为1.2倍，</span></span><br><span class="line"><span class="meta">部门号</span>=<span class="string">=50，显示的工资为1.3倍，</span></span><br><span class="line"><span class="attr">其他部门，显示原有工资。</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string"></span></span><br><span class="line">  <span class="attr">salary</span> <span class="string">AS 原始工资,</span></span><br><span class="line">  <span class="attr">department_id</span> <span class="string">,</span></span><br><span class="line">  <span class="attr">CASE</span></span><br><span class="line">    <span class="attr">department_id</span> <span class="string"></span></span><br><span class="line">    <span class="attr">WHEN</span> <span class="string">30 </span></span><br><span class="line">    <span class="attr">THEN</span> <span class="string">salary * 1.1 </span></span><br><span class="line">    <span class="attr">WHEN</span> <span class="string">40 </span></span><br><span class="line">    <span class="attr">THEN</span> <span class="string">salary * 1.2 </span></span><br><span class="line">    <span class="attr">WHEN</span> <span class="string">50 </span></span><br><span class="line">    <span class="attr">THEN</span> <span class="string">salary * 1.3 </span></span><br><span class="line">    <span class="attr">ELSE</span> <span class="string">salary </span></span><br><span class="line">  <span class="attr">END</span> <span class="string">AS 新工资 </span></span><br><span class="line"><span class="attr">FROM</span></span><br><span class="line">  <span class="attr">employees</span> <span class="string">;</span></span><br><span class="line"><span class="meta">2)CASE</span> <span class="string">使用2：</span></span><br><span class="line"><span class="attr">语法：</span></span><br><span class="line"><span class="attr">CASE</span> <span class="string"></span></span><br><span class="line"><span class="attr">WHEN</span> <span class="string">条件1 THEN 要显示的值1或语句1</span></span><br><span class="line"><span class="attr">WHEN</span> <span class="string">条件2 THEN 要显示的值2或语句2</span></span><br><span class="line"><span class="attr">...</span></span><br><span class="line"><span class="attr">ELSE</span> <span class="string">要显示的值n或语句n</span></span><br><span class="line"><span class="attr">END</span></span><br><span class="line"><span class="attr">案例：查询员工的工资情况</span></span><br><span class="line"><span class="attr">如果&gt;2w，显示A</span></span><br><span class="line"><span class="attr">如果&gt;1.5w，显示B</span></span><br><span class="line"><span class="attr">如果&gt;1w，显示C</span></span><br><span class="line"><span class="attr">否则，显示D</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string"></span></span><br><span class="line">  <span class="attr">salary,</span></span><br><span class="line">  <span class="attr">CASE</span></span><br><span class="line">    <span class="attr">WHEN</span> <span class="string">salary &gt; 20000 </span></span><br><span class="line">    <span class="attr">THEN</span> <span class="string">&#x27;A&#x27; </span></span><br><span class="line">    <span class="attr">WHEN</span> <span class="string">salary &gt; 15000 </span></span><br><span class="line">    <span class="attr">THEN</span> <span class="string">&#x27;B&#x27; </span></span><br><span class="line">    <span class="attr">WHEN</span> <span class="string">salary &gt; 10000 </span></span><br><span class="line">    <span class="attr">THEN</span> <span class="string">&#x27;C&#x27; </span></span><br><span class="line">    <span class="attr">ELSE</span> <span class="string">&#x27;D&#x27; </span></span><br><span class="line">  <span class="attr">END</span> <span class="string">AS 工资等级 FROM employees ;</span></span><br></pre></td></tr></table></figure>


<h5 id="2-分组函数"><a href="#2-分组函数" class="headerlink" title="2.分组函数"></a>2.分组函数</h5><p><strong>功能：用作统计使用</strong></p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">1.sum</span> :<span class="string">求和</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string">SUM(salary) FROM employees;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">2.avg：平均值</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string">AVG(salary) FROM employees;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">3.max：最大值</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string">MAX(salary) FROM employees;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">4.min：最小值</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string">MIN(salary) FROM employees;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">5.count：计算个数</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string">COUNT(salary) FROM employees;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">总结</span></span><br><span class="line"><span class="attr">①.sum,avg一般用于处理数值类型</span></span><br><span class="line"><span class="attr">②.max，min，count用来处理任何类型</span></span><br><span class="line"><span class="attr">③.以上分组函数都忽略null值</span></span><br><span class="line"><span class="attr">④.可以和distinct搭配</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string">SUM(DISTINCT salary) 纯净,SUM(salary) FROM employees;</span></span><br><span class="line"><span class="attr">6.count的详细介绍</span></span><br><span class="line"><span class="meta">①select</span> <span class="string">COUNT(*) FROM employees;</span></span><br><span class="line"><span class="meta">②select</span> <span class="string">COUNT(1) FROM employees;</span></span><br><span class="line"><span class="meta">③和分组函数一同查询的字段要求是group</span> <span class="string">by后的字段。</span></span><br></pre></td></tr></table></figure>


<h4 id="5-分组查询"><a href="#5-分组查询" class="headerlink" title="5.分组查询"></a>5.分组查询</h4><p><strong>GROUP BY 和分组函数对应</strong><br><strong>分组查询中分组条件分为两类</strong></p>
<table>
<thead>
<tr>
<th></th>
<th><strong>数据源</strong></th>
<th><strong>位置</strong></th>
<th><strong>关键字</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>分组前筛选</strong></td>
<td>原始表</td>
<td>GROUP BY 子句的前面</td>
<td>WHERE</td>
</tr>
<tr>
<td><strong>分组后筛选</strong></td>
<td>分组后的结果集</td>
<td>GROUP BY 子句的后面</td>
<td>HAVING</td>
</tr>
</tbody></table>
<p><strong>分组函数做条件肯定是放在having子句中。</strong><br><strong>group BY 子句支持单个字段分组，多个字段分组</strong><br><strong>（多个字段之间用逗号隔开没有顺序要求），表达式或函数。</strong><br><strong>也可以添加排序，放在整个分组查询的最后。</strong></p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">案例：查询每个工种的最高工资</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string"></span></span><br><span class="line">  <span class="attr">MAX(salary),</span></span><br><span class="line">  <span class="attr">job_id</span> <span class="string"></span></span><br><span class="line"><span class="attr">FROM</span></span><br><span class="line">  <span class="attr">employees</span> <span class="string"></span></span><br><span class="line"><span class="attr">GROUP</span> <span class="string">BY job_id </span></span><br><span class="line"><span class="attr">ORDER</span> <span class="string">BY MAX(salary) ASC ;</span></span><br><span class="line"><span class="attr">案例：查询邮箱中包含a字符的，每个部门的平均工资</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string"></span></span><br><span class="line">  <span class="attr">AVG(salary),</span></span><br><span class="line">  <span class="attr">department_id</span> <span class="string"></span></span><br><span class="line"><span class="attr">FROM</span></span><br><span class="line">  <span class="attr">employees</span> <span class="string"></span></span><br><span class="line"><span class="attr">WHERE</span> <span class="string">email LIKE &#x27;%a%&#x27; </span></span><br><span class="line"><span class="attr">GROUP</span> <span class="string">BY department_id ;</span></span><br><span class="line"><span class="comment">#select Avg(salary),dep_id from employee where email like %a% group by dep_id ;</span></span><br><span class="line"><span class="attr">案例：查询有奖金的每个领导手下员工的最高工资</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string"></span></span><br><span class="line">  <span class="attr">MAX(salary),</span></span><br><span class="line">  <span class="attr">manager_id</span> <span class="string"></span></span><br><span class="line"><span class="attr">FROM</span></span><br><span class="line">  <span class="attr">employees</span> <span class="string"></span></span><br><span class="line"><span class="attr">WHERE</span> <span class="string">commission_pct IS NOT NULL </span></span><br><span class="line"><span class="attr">GROUP</span> <span class="string">BY manager_id ;</span></span><br><span class="line"><span class="comment">#select max(salary) ,manage_id from employees where commission_pct is not null group by manager_id;</span></span><br><span class="line"><span class="attr">案例：哪个部门的员工个数大于二？</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string"></span></span><br><span class="line">  <span class="attr">COUNT(*),</span></span><br><span class="line">  <span class="attr">department_id</span> <span class="string"></span></span><br><span class="line"><span class="attr">FROM</span></span><br><span class="line">  <span class="attr">employees</span> <span class="string"></span></span><br><span class="line"><span class="attr">GROUP</span> <span class="string">BY department_id </span></span><br><span class="line"><span class="attr">HAVING</span> <span class="string">COUNT(*) &gt; 2 ;</span></span><br><span class="line"><span class="comment">#select dep_id from emp group by dep_id having count(*)&gt;2;</span></span><br><span class="line"><span class="attr">案例：查询每个工种有奖金的员工的最高工资&gt;12000的工种编号和最高工资</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string"></span></span><br><span class="line">  <span class="attr">MAX(salary),</span></span><br><span class="line">  <span class="attr">job_id</span> <span class="string"></span></span><br><span class="line"><span class="attr">FROM</span></span><br><span class="line">  <span class="attr">employees</span> <span class="string"></span></span><br><span class="line"><span class="attr">WHERE</span> <span class="string">commission_pct IS NOT NULL </span></span><br><span class="line"><span class="attr">GROUP</span> <span class="string">BY job_id </span></span><br><span class="line"><span class="attr">HAVING</span> <span class="string">MAX(salary) &gt; 12000 ;</span></span><br><span class="line"><span class="comment">#select job_id ,max(salary) from emp where commission_pct IS NOT NULL group by job_id having max(salary)&gt;12000;</span></span><br><span class="line"><span class="attr">案例：查询领导编号&gt;102的每个领导手下的最低工资&gt;5000的领导编号是哪个？</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string">manager_id ,MIN(salary)</span></span><br><span class="line"><span class="attr">FROM</span> <span class="string">employees</span></span><br><span class="line"><span class="attr">WHERE</span> <span class="string">manager_id&gt;102</span></span><br><span class="line"><span class="attr">GROUP</span> <span class="string">BY manager_id</span></span><br><span class="line"><span class="attr">HAVING</span> <span class="string">MIN(salary)&gt;5000;</span></span><br><span class="line"><span class="comment">#select manager_id from emp where manager_id&gt;102 group by manager_id having min(salary)&gt;5000;</span></span><br><span class="line"><span class="comment">#按照员工姓名的长度分组，查询每一组的员工个数，筛选员工个数&gt;5的有哪些？</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string">COUNT(*) AS c</span></span><br><span class="line"><span class="attr">FROM</span> <span class="string">employees</span></span><br><span class="line"><span class="attr">GROUP</span> <span class="string">BY LENGTH(last_name) </span></span><br><span class="line"><span class="attr">HAVING</span> <span class="string">c&gt;5;</span></span><br><span class="line"><span class="comment"># select count(*) from emp group by length(name) having count(*)&gt;5;</span></span><br><span class="line"><span class="comment">#查询每个部门每个工种的员工的平均工资</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string">AVG(salary),job_id</span></span><br><span class="line"><span class="attr">FROM</span> <span class="string">employees</span></span><br><span class="line"><span class="attr">GROUP</span> <span class="string">BY department_id,job_id;</span></span><br><span class="line"><span class="comment">#select avg(salary) from emp group by dep_id,job_id;</span></span><br><span class="line"><span class="comment">#查询每个部门每个工种的员工的平均工资并且按照平均工资的高低显示</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string">AVG(salary),job_id</span></span><br><span class="line"><span class="attr">FROM</span> <span class="string">employees</span></span><br><span class="line"><span class="attr">GROUP</span> <span class="string">BY department_id,job_id</span></span><br><span class="line"><span class="attr">ORDER</span> <span class="string">BY AVG(salary) ASC;</span></span><br><span class="line"><span class="comment">#select avg(salary) from emp group by dep_id,job_id order by avg(salary) asc;</span></span><br></pre></td></tr></table></figure>


<h4 id="6-连接查询"><a href="#6-连接查询" class="headerlink" title="6.连接查询"></a>6.连接查询</h4><p><strong>又称为多表查询，当查询的字段来自多个表时，就会用到连接查询。</strong><br>**笛卡尔乘积现象：表1有m行，表2有n行，结果：m_n行_<br><strong>发生原因：没有有效的连接条件</strong></p>
<p><strong>分类</strong></p>
<p>①按年代分类<br>sql92:仅仅支持内连接<br>sql99：不支持全外连接</p>
<p>②按功能分类</p>
<table>
<thead>
<tr>
<th>内连接</th>
<th>外连接</th>
<th>交叉连接</th>
</tr>
</thead>
<tbody><tr>
<td>等值连接</td>
<td>左外连接</td>
<td></td>
</tr>
<tr>
<td>非等值连接</td>
<td>右外连接</td>
<td></td>
</tr>
<tr>
<td>自连接</td>
<td>全外连接</td>
<td></td>
</tr>
</tbody></table>
<h5 id="1-等值连接"><a href="#1-等值连接" class="headerlink" title="1.等值连接"></a>1.等值连接</h5><p>①多表等值连接的结果为多表的交集部分<br>②n表连接，至少需要n-1个连接条件<br>③多表的顺序没有要求<br>④一般需要为表起别名<br>⑤可以搭配前面介绍的所有子句使用，比如排序，分组，筛选</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#案例一：查询女优名对应的男优名</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string"></span></span><br><span class="line">  <span class="attr">NAME,</span></span><br><span class="line">  <span class="attr">boyName</span> <span class="string"></span></span><br><span class="line"><span class="attr">FROM</span></span><br><span class="line">  <span class="attr">beauty,</span></span><br><span class="line">  <span class="attr">boys</span> <span class="string"></span></span><br><span class="line"><span class="attr">WHERE</span> <span class="string">beauty.boyfriend_id = boys.`id` ;</span></span><br><span class="line"><span class="comment">#select name, boyname from girl ,boy where girl.boyfriend_id=boy.id;</span></span><br><span class="line"><span class="comment">#案例：查询员工名和对应的部门名</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string"></span></span><br><span class="line">  <span class="attr">last_name,</span></span><br><span class="line">  <span class="attr">department_name</span> <span class="string"></span></span><br><span class="line"><span class="attr">FROM</span></span><br><span class="line">  <span class="attr">employees,</span></span><br><span class="line">  <span class="attr">departments</span> <span class="string"></span></span><br><span class="line"><span class="attr">WHERE</span> <span class="string">employees.`department_id` = departments.`department_id` ;</span></span><br><span class="line"><span class="comment">#select name ,dep_name from emp e,dep d where e.dep.id= d.id;</span></span><br><span class="line"><span class="comment">#案例：查询员工名，工种号，工种名。</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string"></span></span><br><span class="line">  <span class="attr">last_name,</span></span><br><span class="line">  <span class="attr">emp.`job_id`,</span></span><br><span class="line">  <span class="attr">job_title</span> <span class="string"></span></span><br><span class="line"><span class="attr">FROM</span></span><br><span class="line">  <span class="attr">employees</span> <span class="string">emp,</span></span><br><span class="line">  <span class="attr">jobs</span> <span class="string">job </span></span><br><span class="line"><span class="attr">WHERE</span> <span class="string">emp.`job_id` = job.`job_id` ;</span></span><br><span class="line"><span class="comment">#select name , e.job_id,job_title from emp e,job j where e.job_id=j.id;</span></span><br><span class="line"><span class="comment">#案例：查询有奖金的员工名和部门名</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string"></span></span><br><span class="line">  <span class="attr">last_name,</span></span><br><span class="line">  <span class="attr">department_name</span> <span class="string"></span></span><br><span class="line"><span class="attr">FROM</span></span><br><span class="line">  <span class="attr">employees</span> <span class="string">emp,</span></span><br><span class="line">  <span class="attr">departments</span> <span class="string">dep </span></span><br><span class="line"><span class="attr">WHERE</span> <span class="string">commission_pct IS NOT NULL &amp;&amp; emp.`department_id` = dep.`department_id` ;</span></span><br><span class="line"><span class="comment">#select name ,dep_name from emp e ,dep d where e.dep_id =d.id &amp;&amp;e.salary_pct is not null;</span></span><br><span class="line"><span class="comment">#案例：查询城市名第二个字符为o的部门</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string"></span></span><br><span class="line">  <span class="attr">department_name</span> <span class="string"></span></span><br><span class="line"><span class="attr">FROM</span></span><br><span class="line">  <span class="attr">locations</span> <span class="string">l,</span></span><br><span class="line">  <span class="attr">departments</span> <span class="string">d </span></span><br><span class="line"><span class="attr">WHERE</span> <span class="string">l.`location_id` = d.`location_id` </span></span><br><span class="line">  <span class="attr">AND</span> <span class="string">l.`city` LIKE &#x27;_o%&#x27; ;</span></span><br><span class="line"><span class="comment">#select dep_name from location l , dep d where l.city like %_o% &amp;&amp; l.id =d.location_id;</span></span><br><span class="line"><span class="comment">#案例：查询每个城市的部门个数</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string"></span></span><br><span class="line">  <span class="attr">COUNT(*),</span></span><br><span class="line">  <span class="attr">city</span> <span class="string"></span></span><br><span class="line"><span class="attr">FROM</span></span><br><span class="line">  <span class="attr">locations</span> <span class="string">l,</span></span><br><span class="line">  <span class="attr">departments</span> <span class="string">d </span></span><br><span class="line"><span class="attr">WHERE</span> <span class="string">l.`location_id` = d.`location_id` </span></span><br><span class="line"><span class="attr">GROUP</span> <span class="string">BY l.`city` ;</span></span><br><span class="line"><span class="comment">#select count(*),city from loca l,dep d where l.loc_id=d.loc_id group by count(*) asc;</span></span><br><span class="line"><span class="comment">#案例：查询有奖金的每个部门的部门名和部门的领导编号和该部门的最低工资</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string"></span></span><br><span class="line">  <span class="attr">d.`department_name`,</span></span><br><span class="line">  <span class="attr">d.manager_id,</span></span><br><span class="line">  <span class="meta">MIN(salary)</span> <span class="string"></span></span><br><span class="line"><span class="attr">FROM</span></span><br><span class="line">  <span class="attr">employees</span> <span class="string">e,</span></span><br><span class="line">  <span class="attr">departments</span> <span class="string">d </span></span><br><span class="line"><span class="attr">WHERE</span> <span class="string">e.`department_id` = d.`department_id` </span></span><br><span class="line">  <span class="attr">AND</span> <span class="string">e.`commission_pct` IS NOT NULL </span></span><br><span class="line"><span class="attr">GROUP</span> <span class="string">BY d.`department_id`,</span></span><br><span class="line">  <span class="meta">d.`department_name`</span> <span class="string">;</span></span><br><span class="line"><span class="comment">#select dep_name ,d.manager_id ,min(salary) from emp e ,dep d where e.`department_id` = d.`department_id` AND e.`commission_pct` IS NOT NULL GROUP BY d.`department_id`,d.`department_name` ;</span></span><br><span class="line"><span class="comment">#案例：查询每个工种的工种名和员工的个数，并且按照员工个数降序排序</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string"></span></span><br><span class="line">  <span class="attr">j.job_title,</span></span><br><span class="line">  <span class="meta">COUNT(*)</span> <span class="string"></span></span><br><span class="line"><span class="attr">FROM</span></span><br><span class="line">  <span class="attr">jobs</span> <span class="string">j,</span></span><br><span class="line">  <span class="attr">employees</span> <span class="string">e </span></span><br><span class="line"><span class="attr">WHERE</span> <span class="string">j.`job_id` = e.`job_id` </span></span><br><span class="line"><span class="attr">GROUP</span> <span class="string">BY e.`job_id`,</span></span><br><span class="line">  <span class="meta">j.`job_title`</span> <span class="string"></span></span><br><span class="line"><span class="attr">ORDER</span> <span class="string">BY COUNT(*) DESC ;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">#案例：查询员工名，部门名和所在城市</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string"></span></span><br><span class="line">  <span class="attr">last_name,</span></span><br><span class="line">  <span class="attr">department_name,</span></span><br><span class="line">  <span class="attr">city</span> <span class="string"></span></span><br><span class="line"><span class="attr">FROM</span></span><br><span class="line">  <span class="attr">employees</span> <span class="string">e,</span></span><br><span class="line">  <span class="attr">departments</span> <span class="string">d,</span></span><br><span class="line">  <span class="attr">locations</span> <span class="string">l </span></span><br><span class="line"><span class="attr">WHERE</span> <span class="string">e.`department_id` = d.`department_id` </span></span><br><span class="line">  <span class="attr">AND</span> <span class="string">d.`location_id` = l.`location_id` ;</span></span><br></pre></td></tr></table></figure>


<h5 id="2-非等值连接"><a href="#2-非等值连接" class="headerlink" title="2.非等值连接"></a>2.非等值连接</h5><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#案例：查询员工的工资和工资级别</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string">DISTINCT </span></span><br><span class="line">  <span class="attr">salary,</span></span><br><span class="line">  <span class="attr">grade_level</span> <span class="string"></span></span><br><span class="line"><span class="attr">FROM</span></span><br><span class="line">  <span class="attr">employees</span> <span class="string">e,</span></span><br><span class="line">  <span class="attr">job_grades</span> <span class="string">j </span></span><br><span class="line"><span class="attr">WHERE</span> <span class="string">e.salary &gt;= j.lowest_sal &amp;&amp; e.salary &lt;= j.highest_sal </span></span><br><span class="line"><span class="attr">ORDER</span> <span class="string">BY salary ASC ;</span></span><br></pre></td></tr></table></figure>


<h5 id="3-自连接"><a href="#3-自连接" class="headerlink" title="3.自连接"></a>3.自连接</h5><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#案例：查询员工名和上级的名称</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string"></span></span><br><span class="line">  <span class="attr">e.last_name,</span></span><br><span class="line">  <span class="meta">m.last_name</span> <span class="string"></span></span><br><span class="line"><span class="attr">FROM</span></span><br><span class="line">  <span class="attr">employees</span> <span class="string">e,</span></span><br><span class="line">  <span class="attr">employees</span> <span class="string">m </span></span><br><span class="line"><span class="attr">WHERE</span> <span class="string">e.manager_id = m.employee_id ;</span></span><br></pre></td></tr></table></figure>


<h5 id="4-内连接"><a href="#4-内连接" class="headerlink" title="4.内连接"></a>4.内连接</h5><p><strong>INNER 可以省略</strong></p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#查询员工名，部门名</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string"></span></span><br><span class="line">  <span class="attr">last_name,</span></span><br><span class="line">  <span class="attr">department_name</span> <span class="string"></span></span><br><span class="line"><span class="attr">FROM</span></span><br><span class="line">  <span class="attr">employees</span> <span class="string">e </span></span><br><span class="line">  <span class="attr">INNER</span> <span class="string">JOIN departments d </span></span><br><span class="line">    <span class="attr">ON</span> <span class="string">e.department_id = d.department_id ;</span></span><br><span class="line"><span class="comment">#查询名字中包含e的员工名和工种名</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string"></span></span><br><span class="line">  <span class="attr">last_name,</span></span><br><span class="line">  <span class="attr">job_title</span> <span class="string"></span></span><br><span class="line"><span class="attr">FROM</span></span><br><span class="line">  <span class="attr">employees</span> <span class="string">e </span></span><br><span class="line">  <span class="attr">INNER</span> <span class="string">JOIN jobs j </span></span><br><span class="line">    <span class="attr">ON</span> <span class="string">e.job_id = j.job_id </span></span><br><span class="line"><span class="attr">WHERE</span> <span class="string">last_name LIKE &#x27;%e%&#x27; ;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">#查询部门个数&gt;3的城市名和部门个数</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string"></span></span><br><span class="line">  <span class="attr">city,</span></span><br><span class="line">  <span class="meta">COUNT(*)</span> <span class="string"></span></span><br><span class="line"><span class="attr">FROM</span></span><br><span class="line">  <span class="attr">departments</span> <span class="string">d </span></span><br><span class="line">  <span class="attr">INNER</span> <span class="string">JOIN locations l </span></span><br><span class="line">    <span class="attr">ON</span> <span class="string">d.`location_id` = l.`location_id` </span></span><br><span class="line"><span class="attr">GROUP</span> <span class="string">BY city</span></span><br><span class="line"><span class="attr">HAVING</span> <span class="string">COUNT(*) &gt; 3 ;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">#查询哪个部门的部门员工个数&gt;3的部门名和员工个数，并按照个数降序排序</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string"></span></span><br><span class="line">  <span class="attr">department_name,</span></span><br><span class="line">  <span class="meta">COUNT(*)</span> <span class="string"></span></span><br><span class="line"><span class="attr">FROM</span></span><br><span class="line">  <span class="attr">employees</span> <span class="string">e </span></span><br><span class="line">  <span class="attr">INNER</span> <span class="string">JOIN departments d </span></span><br><span class="line">    <span class="attr">ON</span> <span class="string">e.`department_id` = d.`department_id` </span></span><br><span class="line"><span class="attr">GROUP</span> <span class="string">BY e.department_id </span></span><br><span class="line"><span class="attr">HAVING</span> <span class="string">COUNT(*) &gt; 3 </span></span><br><span class="line"><span class="attr">ORDER</span> <span class="string">BY COUNT(*) DESC ;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">#查询员工名，部门名，工种名，并按照部门名降序排序</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string"></span></span><br><span class="line">  <span class="attr">last_name,</span></span><br><span class="line">  <span class="attr">department_name,</span></span><br><span class="line">  <span class="attr">job_title</span> <span class="string"></span></span><br><span class="line"><span class="attr">FROM</span></span><br><span class="line">  <span class="attr">employees</span> <span class="string">e </span></span><br><span class="line">  <span class="attr">INNER</span> <span class="string">JOIN departments d </span></span><br><span class="line">    <span class="attr">ON</span> <span class="string">e.`department_id` = d.`department_id` </span></span><br><span class="line">  <span class="attr">INNER</span> <span class="string">JOIN jobs j </span></span><br><span class="line">    <span class="attr">ON</span> <span class="string">e.`job_id` = j.`job_id` </span></span><br><span class="line"><span class="attr">ORDER</span> <span class="string">BY department_name DESC ;</span></span><br><span class="line"><span class="comment">#查询员工工资级别</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string"></span></span><br><span class="line">  <span class="attr">grade_level,</span></span><br><span class="line">  <span class="attr">salary</span></span><br><span class="line"><span class="attr">FROM</span></span><br><span class="line">  <span class="attr">job_grades</span> <span class="string">j </span></span><br><span class="line">  <span class="attr">INNER</span> <span class="string">JOIN employees e </span></span><br><span class="line">    <span class="attr">ON</span> <span class="string">e.`salary` BETWEEN j.`lowest_sal` </span></span><br><span class="line">    <span class="attr">AND</span> <span class="string">j.`highest_sal` ;</span></span><br><span class="line"><span class="comment">#查询每个工资级别的个数，并且降序排序</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string">grade_level,COUNT(*)</span></span><br><span class="line"><span class="attr">FROM</span> <span class="string">employees e</span></span><br><span class="line"><span class="attr">INNER</span> <span class="string">JOIN  job_grades j</span></span><br><span class="line"><span class="attr">ON</span> <span class="string">e.`salary` BETWEEN j.`lowest_sal` </span></span><br><span class="line">    <span class="attr">AND</span> <span class="string">j.`highest_sal` </span></span><br><span class="line"><span class="attr">GROUP</span> <span class="string">BY grade_level</span></span><br><span class="line"><span class="attr">ORDER</span> <span class="string">BY COUNT(*) DESC;</span></span><br><span class="line"><span class="comment">#查询员工的名字和上级的名字</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string">e1.last_name, e2.last_name</span></span><br><span class="line"><span class="attr">FROM</span> <span class="string">employees e1</span></span><br><span class="line"><span class="attr">INNER</span> <span class="string">JOIN employees e2</span></span><br><span class="line"><span class="attr">ON</span> <span class="string">e1.`employee_id`=e2.`manager_id`;</span></span><br></pre></td></tr></table></figure>


<h5 id="5-左外连接"><a href="#5-左外连接" class="headerlink" title="5.左外连接"></a>5.左外连接</h5><p><strong>语法：</strong><br>SELECT 查询列表<br>FROM 表1 【连接类型】<br>JOIN 表2<br>ON 连接条件<br>WHERE 筛选条件<br>GROUP BY 分组<br>HAVING 筛选条件<br>ORDER BY 排序条件<br><strong>连接类型：</strong><br>内连接：inner<br>左外连接：left<br>右外连接：right<br>全外连接：full<br>交叉连接：cross<br><strong>外连接</strong><br>用于查询一个表中有，另一个表中没有的数据<br>左外连接，left左边是主表<br>右外连接，right右边是主表<br><em>Mysql不支持全外连接</em></p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#没有男朋友的女生</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string"></span></span><br><span class="line"><span class="attr">g.`name`,b.`boyName`</span></span><br><span class="line"><span class="attr">FROM</span> <span class="string">beauty g</span></span><br><span class="line"><span class="attr">LEFT</span> <span class="string">JOIN boys b</span></span><br><span class="line"><span class="attr">ON</span> <span class="string">g.`boyfriend_id`=b.`id`</span></span><br><span class="line"><span class="attr">WHERE</span> <span class="string">b.`boyName` IS NULL;</span></span><br></pre></td></tr></table></figure>


<h5 id="6-交叉连接"><a href="#6-交叉连接" class="headerlink" title="6.交叉连接"></a>6.交叉连接</h5><p><strong>笛卡尔乘积</strong></p>
<h4 id="7-子查询"><a href="#7-子查询" class="headerlink" title="7.子查询"></a>7.子查询</h4><p><strong>出现在其它语句中的select语句，称为子查询或内查询</strong><br><strong>外部的查询语句，称为主查询或外查询</strong><br><strong>分类：</strong></p>
<p>①按照子查询出现的位置：</p>
<table>
<thead>
<tr>
<th>select后面</th>
<th>from后面</th>
<th>where或having后面</th>
<th>exists后面</th>
</tr>
</thead>
<tbody><tr>
<td>仅仅支持标量子查询</td>
<td>支持表子查询</td>
<td>标量子查询，列子查询</td>
<td>表子查询</td>
</tr>
</tbody></table>
<p>②按照结果集的行列数不同：</p>
<table>
<thead>
<tr>
<th>标量子查询</th>
<th>列子查询</th>
<th>行子查询</th>
<th>表子查询</th>
</tr>
</thead>
<tbody><tr>
<td>结果只有一行一列</td>
<td>结果一列多行</td>
<td>一行多列</td>
<td>多行多列</td>
</tr>
</tbody></table>
<h5 id="1）where或having后面"><a href="#1）where或having后面" class="headerlink" title="1）where或having后面"></a>1）where或having后面</h5><p><strong>特点：</strong><br>子查询一般放在小括号内<br>子查询一般放在条件的右边<br>标量子查询，一般搭配着单行操作符<br>列子查询：一般搭配多行操作符使用</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">1.标量子查询</span></span><br><span class="line"><span class="comment">#谁的工资比Abel高</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string"></span></span><br><span class="line">  <span class="attr">last_name</span> <span class="string"></span></span><br><span class="line"><span class="attr">FROM</span></span><br><span class="line">  <span class="attr">employees</span> <span class="string"></span></span><br><span class="line"><span class="attr">WHERE</span> <span class="string">salary &gt; </span></span><br><span class="line">  <span class="meta">(SELECT</span> <span class="string"></span></span><br><span class="line">    <span class="attr">salary</span> <span class="string"></span></span><br><span class="line">  <span class="attr">FROM</span></span><br><span class="line">    <span class="attr">employees</span> <span class="string"></span></span><br><span class="line">  <span class="attr">WHERE</span> <span class="string">last_name = &#x27;Abel&#x27;) ;</span></span><br><span class="line"><span class="comment">#返回job_id于141号员工相同，salary比143号员工多的员工 姓名，job_id和工资</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string"></span></span><br><span class="line">  <span class="attr">last_name,</span></span><br><span class="line">  <span class="attr">job_id,</span></span><br><span class="line">  <span class="attr">salary</span> <span class="string"></span></span><br><span class="line"><span class="attr">FROM</span></span><br><span class="line">  <span class="attr">employees</span> <span class="string"></span></span><br><span class="line"><span class="attr">WHERE</span> <span class="string">job_id = </span></span><br><span class="line">  <span class="meta">(SELECT</span> <span class="string"></span></span><br><span class="line">    <span class="attr">job_id</span> <span class="string"></span></span><br><span class="line">  <span class="attr">FROM</span></span><br><span class="line">    <span class="attr">employees</span> <span class="string"></span></span><br><span class="line">  <span class="attr">WHERE</span> <span class="string">employee_id = 141) </span></span><br><span class="line">  <span class="attr">AND</span> <span class="string">salary &gt; </span></span><br><span class="line">  <span class="meta">(SELECT</span> <span class="string"></span></span><br><span class="line">    <span class="attr">salary</span> <span class="string"></span></span><br><span class="line">  <span class="attr">FROM</span></span><br><span class="line">    <span class="attr">employees</span> <span class="string"></span></span><br><span class="line">  <span class="attr">WHERE</span> <span class="string">employee_id = 143)</span></span><br><span class="line"><span class="comment">#返回公司工资工资最少的员工的姓名，job_id,salary</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string"></span></span><br><span class="line">  <span class="attr">last_name,</span></span><br><span class="line">  <span class="attr">job_id,</span></span><br><span class="line">  <span class="attr">salary</span> <span class="string"></span></span><br><span class="line"><span class="attr">FROM</span></span><br><span class="line">  <span class="attr">employees</span> <span class="string"></span></span><br><span class="line"><span class="attr">WHERE</span> <span class="string">salary = </span></span><br><span class="line">  <span class="meta">(SELECT</span> <span class="string"></span></span><br><span class="line">    <span class="meta">MIN(salary)</span> <span class="string"></span></span><br><span class="line">  <span class="attr">FROM</span></span><br><span class="line">    <span class="attr">employees);</span></span><br><span class="line"><span class="comment">#查询最低工资大于50号部门最低工资的部门id和其最低工资</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string"></span></span><br><span class="line">  <span class="attr">department_id,</span></span><br><span class="line">  <span class="meta">MIN(salary)</span> <span class="string"></span></span><br><span class="line"><span class="attr">FROM</span></span><br><span class="line">  <span class="attr">employees</span> <span class="string"></span></span><br><span class="line"><span class="attr">GROUP</span> <span class="string">BY department_id </span></span><br><span class="line"><span class="attr">HAVING</span> <span class="string">MIN(salary) &gt; </span></span><br><span class="line">  <span class="meta">(SELECT</span> <span class="string"></span></span><br><span class="line">    <span class="meta">MIN(salary)</span> <span class="string"></span></span><br><span class="line">  <span class="attr">FROM</span></span><br><span class="line">    <span class="attr">employees</span> <span class="string"></span></span><br><span class="line">  <span class="attr">WHERE</span> <span class="string">department_id = 50) ;</span></span><br><span class="line"><span class="attr">2.列子查询</span></span><br><span class="line"><span class="attr">多行操作符：</span></span><br><span class="line"><span class="attr">IN</span> <span class="string">/ NOT in：等于列表中的任意一个</span></span><br><span class="line"><span class="attr">ANY</span> <span class="string">/ SOME ：和子查询返回的某一个值比较</span></span><br><span class="line"><span class="attr">ALL</span> <span class="string">：和子查询返回的所有值比较</span></span><br><span class="line"><span class="comment">#返回location_id是1400或者1700的部门中的所有员工姓名</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string"></span></span><br><span class="line">  <span class="attr">last_name</span> <span class="string"></span></span><br><span class="line"><span class="attr">FROM</span></span><br><span class="line">  <span class="attr">employees</span> <span class="string"></span></span><br><span class="line"><span class="attr">WHERE</span> <span class="string">department_id IN</span></span><br><span class="line">  <span class="meta">(SELECT</span> <span class="string">DISTINCT</span></span><br><span class="line">    <span class="attr">department_id</span> <span class="string"></span></span><br><span class="line">  <span class="attr">FROM</span></span><br><span class="line">    <span class="attr">departments</span> <span class="string"></span></span><br><span class="line">  <span class="attr">WHERE</span> <span class="string">location_id IN (1400, 1700)) ;</span></span><br><span class="line"><span class="comment">#返回其他工种中比job_id为IT_PROG部门任意工资低的员工</span></span><br><span class="line"><span class="comment">#工号，姓名，job_id以及salary</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string"></span></span><br><span class="line">  <span class="attr">employee_id,</span></span><br><span class="line">  <span class="attr">last_name,</span></span><br><span class="line">  <span class="attr">job_id,</span></span><br><span class="line">  <span class="attr">salary</span> <span class="string"></span></span><br><span class="line"><span class="attr">FROM</span></span><br><span class="line">  <span class="attr">employees</span> <span class="string"></span></span><br><span class="line"><span class="attr">WHERE</span> <span class="string">salary &lt; </span></span><br><span class="line">  <span class="meta">(SELECT</span> <span class="string"></span></span><br><span class="line">    <span class="meta">MAX(salary)</span> <span class="string"></span></span><br><span class="line">  <span class="attr">FROM</span></span><br><span class="line">    <span class="attr">employees</span> <span class="string"></span></span><br><span class="line">  <span class="attr">WHERE</span> <span class="string">job_id = &#x27;IT_PROG&#x27;) </span></span><br><span class="line">  <span class="attr">AND</span> <span class="string">job_id !=&#x27;IT_PROG&#x27;;</span></span><br><span class="line"><span class="comment">#返回其他工种中比job_id为IT_PROG部门所有工资低的员工</span></span><br><span class="line"><span class="comment">#工号，姓名，job_id以及salary</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string"></span></span><br><span class="line">  <span class="attr">employee_id,</span></span><br><span class="line">  <span class="attr">last_name,</span></span><br><span class="line">  <span class="attr">job_id,</span></span><br><span class="line">  <span class="attr">salary</span> <span class="string"></span></span><br><span class="line"><span class="attr">FROM</span></span><br><span class="line">  <span class="attr">employees</span> <span class="string"></span></span><br><span class="line"><span class="attr">WHERE</span> <span class="string">salary &lt; </span></span><br><span class="line">  <span class="meta">(SELECT</span> <span class="string"></span></span><br><span class="line">    <span class="meta">MIN(salary)</span> <span class="string"></span></span><br><span class="line">  <span class="attr">FROM</span></span><br><span class="line">    <span class="attr">employees</span> <span class="string"></span></span><br><span class="line">  <span class="attr">WHERE</span> <span class="string">job_id = &#x27;IT_PROG&#x27;) </span></span><br><span class="line">  <span class="attr">AND</span> <span class="string">job_id !=&#x27;IT_PROG&#x27;;</span></span><br><span class="line"><span class="attr">*********************************</span></span><br><span class="line"><span class="attr">3.行子查询</span></span><br><span class="line"><span class="comment">#查询员工编号最小并且工资最高的员工信息</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string"></span></span><br><span class="line">  <span class="meta">*</span> <span class="string"></span></span><br><span class="line"><span class="attr">FROM</span></span><br><span class="line">  <span class="attr">employees</span> <span class="string"></span></span><br><span class="line"><span class="attr">WHERE</span> <span class="string">employee_id = </span></span><br><span class="line">  <span class="meta">(SELECT</span> <span class="string"></span></span><br><span class="line">    <span class="meta">MIN(employee_id)</span> <span class="string"></span></span><br><span class="line">  <span class="attr">FROM</span></span><br><span class="line">    <span class="meta">employees)</span> <span class="string"></span></span><br><span class="line">  <span class="attr">AND</span> <span class="string">salary = </span></span><br><span class="line">  <span class="meta">(SELECT</span> <span class="string"></span></span><br><span class="line">    <span class="meta">MAX(salary)</span> <span class="string"></span></span><br><span class="line">  <span class="attr">FROM</span></span><br><span class="line">    <span class="attr">employees)</span></span><br></pre></td></tr></table></figure>


<h5 id="2）SELECT-后面"><a href="#2）SELECT-后面" class="headerlink" title="2）SELECT 后面"></a>2）SELECT 后面</h5><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#查询每个部门的员工个数</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string"></span></span><br><span class="line">  <span class="attr">d.*,</span></span><br><span class="line">  <span class="meta">(SELECT</span> <span class="string"></span></span><br><span class="line">    <span class="meta">COUNT(*)</span> <span class="string"></span></span><br><span class="line">  <span class="attr">FROM</span></span><br><span class="line">    <span class="attr">employees</span> <span class="string">e </span></span><br><span class="line">  <span class="attr">WHERE</span> <span class="string">e.department_id = d.department_id) </span></span><br><span class="line"><span class="attr">FROM</span></span><br><span class="line">  <span class="attr">departments</span> <span class="string">d ;</span></span><br><span class="line"><span class="comment">#查询员工号等于102的部门名</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string"></span></span><br><span class="line">  <span class="attr">department_name</span> <span class="string"></span></span><br><span class="line"><span class="attr">FROM</span></span><br><span class="line">  <span class="attr">departments</span> <span class="string"></span></span><br><span class="line"><span class="attr">WHERE</span> <span class="string">department_id = </span></span><br><span class="line">  <span class="meta">(SELECT</span> <span class="string"></span></span><br><span class="line">    <span class="attr">department_id</span> <span class="string"></span></span><br><span class="line">  <span class="attr">FROM</span></span><br><span class="line">    <span class="attr">employees</span> <span class="string"></span></span><br><span class="line">  <span class="attr">WHERE</span> <span class="string">employee_id = 102) ;</span></span><br></pre></td></tr></table></figure>


<h5 id="3）FROM-后面"><a href="#3）FROM-后面" class="headerlink" title="3）FROM 后面"></a>3）FROM 后面</h5><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">#查询每个部门平均工资的工资等级</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string"></span></span><br><span class="line">  <span class="attr">grade_level</span> <span class="string">,aa.department_id</span></span><br><span class="line"><span class="attr">FROM</span></span><br><span class="line">  <span class="meta">(SELECT</span> <span class="string"></span></span><br><span class="line">    <span class="meta">AVG(salary)</span> <span class="string">ag,</span></span><br><span class="line">    <span class="attr">department_id</span> <span class="string"></span></span><br><span class="line">  <span class="attr">FROM</span></span><br><span class="line">    <span class="attr">employees</span> <span class="string"></span></span><br><span class="line">  <span class="attr">GROUP</span> <span class="string">BY department_id) aa </span></span><br><span class="line">  <span class="attr">INNER</span> <span class="string">JOIN job_grades j </span></span><br><span class="line">    <span class="attr">ON</span> <span class="string">aa.ag BETWEEN lowest_sal </span></span><br><span class="line">    <span class="attr">AND</span> <span class="string">highest_sal ;</span></span><br></pre></td></tr></table></figure>


<h5 id="4）exists后面（相关子查询）"><a href="#4）exists后面（相关子查询）" class="headerlink" title="4）exists后面（相关子查询）"></a>4）exists后面（相关子查询）</h5><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#查询有员工的部门名</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string">department_name FROM departments d</span></span><br><span class="line"><span class="attr">WHERE</span>  <span class="string">EXISTS(</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string">* FROM employees  e WHERE d.department_id=e.department_id</span></span><br><span class="line"><span class="attr">);</span></span><br><span class="line"><span class="comment">#查询没有女朋友的男生信息</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string">bo.* FROM boys bo WHERE</span></span><br><span class="line"><span class="meta">bo.`id`</span> <span class="string">NOT IN(SELECT boyfriend_id FROM beauty);</span></span><br></pre></td></tr></table></figure>


<h5 id="5）子查询经典案例祥讲"><a href="#5）子查询经典案例祥讲" class="headerlink" title="5）子查询经典案例祥讲"></a>5）子查询经典案例祥讲</h5><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">1.查询工资最低的员工信息：last_name,salary</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string">last_name,salary FROM employees</span></span><br><span class="line"><span class="attr">WHERE</span>  <span class="string">salary=(SELECT MIN(salary) FROM employees);</span></span><br><span class="line"><span class="attr">2.查询平均工资最低的部门信息</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string">* FROM departments WHERE department_id=</span></span><br><span class="line"><span class="meta">(SELECT</span> <span class="string">department_id  FROM employees GROUP BY department_id  ORDER BY AVG(salary)</span></span><br><span class="line"><span class="attr">LIMIT</span> <span class="string">1)</span></span><br><span class="line"><span class="attr">3.查询平均工资最低的部门信息和该部门的平均工资</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string">d.*,a1.ag FROM departments  d JOIN </span></span><br><span class="line"><span class="meta">(SELECT</span> <span class="string">AVG(salary) ag,department_id  FROM employees GROUP BY department_id  ORDER BY AVG(salary)</span></span><br><span class="line"><span class="attr">LIMIT</span> <span class="string">1) a1</span></span><br><span class="line"><span class="attr">ON</span> <span class="string">d.department_id=a1.department_id</span></span><br><span class="line"><span class="attr">4.查询平均工资最高的job信息</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string">j.* FROM jobs j WHERE j.job_id=</span></span><br><span class="line"><span class="meta">(SELECT</span> <span class="string">job_id FROM employees</span></span><br><span class="line"><span class="attr">GROUP</span> <span class="string">BY job_id ORDER BY AVG(salary) DESC LIMIT 1)</span></span><br><span class="line"><span class="attr">5.查询平均工资高于公司平均工资的部门有哪些</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string">department_id FROM </span></span><br><span class="line"><span class="meta">(SELECT</span> <span class="string">department_id ,AVG(salary) AS avg1 FROM employees GROUP BY  department_id) e1</span></span><br><span class="line"><span class="attr">WHERE</span> <span class="string">e1.avg1&gt;(SELECT AVG(salary)  AS avg2 FROM employees) </span></span><br><span class="line"><span class="attr">6.查询出公司中所有manager的详细信息</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string">* FROM employees</span></span><br><span class="line"><span class="attr">WHERE</span> <span class="string">employee_id IN(SELECT DISTINCT manager_id FROM employees);</span></span><br><span class="line"><span class="attr">7.各个部门中，最高工资中最低的那个部门的最低工资是多少</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string">MIN(salary) FROM employees GROUP BY department_id</span></span><br><span class="line"><span class="attr">HAVING</span> <span class="string">department_id=(</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string">department_id FROM employees GROUP BY department_id ORDER BY MAX(salary)</span></span><br><span class="line"><span class="attr">LIMIT</span> <span class="string">1)</span></span><br><span class="line"><span class="attr">8.查询平均工资最高的部门的manager的详细信息：last_name,department_id,email,salary</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string">last_name,department_id,email,salary FROM employees WHERE employee_id=(</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string">manager_id FROM departments WHERE department_id=(</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string">department_id FROM employees GROUP BY department_id ORDER BY AVG(salary)</span></span><br><span class="line"><span class="attr">DESC</span> <span class="string">LIMIT 1))</span></span><br></pre></td></tr></table></figure>


<h4 id="8-分页查询"><a href="#8-分页查询" class="headerlink" title="8.分页查询"></a>8.分页查询</h4><p>**语法：limit(currentPage-1)<em>size,size</em></p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#查询前五条员工信息</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string">* FROM employees LIMIT 0,5;</span></span><br><span class="line"><span class="comment">#查询第11-25条员工信息</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string">* FROM employees LIMIT 10,15;</span></span><br><span class="line"><span class="comment">#查询有奖金的员工，并且工资最高的前十名显示出来</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string">* FROM employees</span></span><br><span class="line"><span class="attr">WHERE</span> <span class="string">commission_pct IS NOT NULL</span></span><br><span class="line"><span class="attr">ORDER</span> <span class="string">BY salary DESC </span></span><br><span class="line"><span class="attr">LIMIT</span> <span class="string">0 ,10;</span></span><br></pre></td></tr></table></figure>


<h4 id="9-联合查询"><a href="#9-联合查询" class="headerlink" title="9.联合查询"></a>9.联合查询</h4><p><strong>要查询的结果来自于多个表，且多个表没有直接的连接关系，单查询的信息一致时</strong><br><strong>特点：</strong><br>1.要求多条查询语句的查询列数是一致的<br>2.要求多条查询语句的查询的每一列的类型和顺序最好一致<br>3.union关键字默认去重，如果使用union all 可以不去除重复项</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">案例：查询员工部门编号大于90或邮箱包含a的员工信息</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string">* FROM employees WHERE department_id&gt;90</span></span><br><span class="line"><span class="attr">UNION</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string">* FROM employees WHERE email LIKE &#x27;%a%&#x27;;</span></span><br></pre></td></tr></table></figure>


<h3 id="三，DML数据操作语言"><a href="#三，DML数据操作语言" class="headerlink" title="三，DML数据操作语言"></a>三，DML数据操作语言</h3><p><strong>插入insert</strong></p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">一：插入语句</span></span><br><span class="line"><span class="comment">#插入beauty一行数据</span></span><br><span class="line"><span class="attr">INSERT</span> <span class="string">INTO beauty(NAME,sex,borndate,phone,photo,boyfriend_id)</span></span><br><span class="line"><span class="attr">VALUES(&#x27;波多野吉依&#x27;,&#x27;女&#x27;,&#x27;1998-11-11&#x27;,&#x27;13342969497&#x27;,</span></span><br><span class="line"><span class="attr">NULL,10)</span></span><br><span class="line"><span class="comment">#可以为null的列如何不插入值</span></span><br><span class="line"><span class="attr">直接写null，或列名少写一列</span></span><br><span class="line"><span class="attr">INSERT</span> <span class="string">INTO beauty(NAME,sex,borndate,phone,photo,boyfriend_id)</span></span><br><span class="line"><span class="attr">VALUES(&#x27;小泽玛利亚&#x27;,&#x27;女&#x27;,&#x27;1999-11-11&#x27;,&#x27;13342456497&#x27;,</span></span><br><span class="line"><span class="attr">NULL,11)</span></span><br><span class="line"><span class="attr">INSERT</span> <span class="string">INTO beauty VALUES(15,&#x27;马蓉&#x27;,&#x27;女&#x27;,&#x27;1989-11-11&#x27;,&#x27;13342456123&#x27;,</span></span><br><span class="line"><span class="attr">NULL,12);</span></span><br><span class="line"><span class="attr">INSERT</span> <span class="string">INTO beauty SET id=16,NAME=&#x27;刘亦菲&#x27;, sex=&#x27;女&#x27;,borndate=&#x27;1989-10-01&#x27;,</span></span><br><span class="line"><span class="attr">phone</span>=<span class="string">&#x27;15945231056&#x27;,boyfriend_id=16;</span></span><br><span class="line"><span class="comment">#insert 嵌套子查询，将一个表的数据插入另一张表</span></span><br><span class="line"><span class="attr">INSERT</span> <span class="string">INTO beauty (NAME,sex,borndate,phone,boyfriend_id)</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string">&#x27;妲己&#x27;,&#x27;女&#x27;,&#x27;1111-11-11&#x27;,&#x27;13146587954&#x27;,0;</span></span><br></pre></td></tr></table></figure>


<p><strong>修改update</strong></p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">二，修改</span></span><br><span class="line"> <span class="attr">UPDATE</span> <span class="string">beauty SET phone=&#x27;110&#x27; WHERE id=16;</span></span><br><span class="line"><span class="attr">多表修改：sql99</span></span><br><span class="line"><span class="attr">UPDATE</span> <span class="string">表1 别名</span></span><br><span class="line"><span class="meta">INNER|LEFT|RIGHT</span> <span class="string">JOIN 表2 别名</span></span><br><span class="line"><span class="attr">ON</span> <span class="string">连接条件</span></span><br><span class="line"><span class="attr">SET</span> <span class="string">列=值</span></span><br><span class="line"><span class="attr">WHERE</span> <span class="string">筛选条件</span></span><br><span class="line"><span class="comment">#修改张无忌的女朋友手机号为114</span></span><br><span class="line"><span class="attr">UPDATE</span> <span class="string">beauty g</span></span><br><span class="line"><span class="attr">INNER</span> <span class="string">JOIN boys b</span></span><br><span class="line"><span class="attr">ON</span> <span class="string">g.boyfriend_id=b.id</span></span><br><span class="line"><span class="attr">SET</span> <span class="string">g.phone=&#x27;114&#x27;</span></span><br><span class="line"><span class="attr">WHERE</span> <span class="string">b.boyName=&#x27;张无忌&#x27;;</span></span><br><span class="line"><span class="comment">#修改没有男朋友的女生的男朋友编号都为4号</span></span><br><span class="line"><span class="attr">UPDATE</span> <span class="string">beauty g</span></span><br><span class="line"><span class="attr">LEFT</span> <span class="string">JOIN  boys b</span></span><br><span class="line"><span class="attr">ON</span> <span class="string">g.`boyfriend_id`=b.id</span></span><br><span class="line"><span class="attr">SET</span> <span class="string">g.`boyfriend_id`=4</span></span><br><span class="line"><span class="attr">WHERE</span> <span class="string">b.id=NULL;</span></span><br></pre></td></tr></table></figure>


<p><strong>删除delete</strong></p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">三，删除</span></span><br><span class="line"><span class="attr">DELETE</span> <span class="string">和 TRUNCATE 的区别：</span></span><br><span class="line"><span class="attr">1.delete可以加where条件，truncate不行</span></span><br><span class="line"><span class="attr">2.truncate删除效率高</span></span><br><span class="line"><span class="attr">3.加入要删除的表中有自增列，</span></span><br><span class="line"><span class="attr">用delete删除整个表后在插入数据，从断点处开始插入</span></span><br><span class="line"><span class="attr">用truncate删除后在插入数据，从1开始。</span></span><br><span class="line"><span class="attr">4.truncate删除没有返回值，delete有返回值</span></span><br><span class="line"><span class="attr">5.truncate删除不能回滚，delete删除可以回滚</span></span><br><span class="line"><span class="attr">DELETE</span> <span class="string">FROM beauty WHERE id=17;</span></span><br><span class="line"><span class="meta">语法：truncate</span> <span class="string">TABLE 表名;</span></span><br><span class="line"><span class="comment">#删除张无忌的女朋友的信息</span></span><br><span class="line"><span class="attr">DELETE</span> <span class="string">g FROM beauty g</span></span><br><span class="line"><span class="attr">INNER</span> <span class="string">JOIN boys b</span></span><br><span class="line"><span class="attr">ON</span> <span class="string">g.boyfriend_id=b.id</span></span><br><span class="line"><span class="attr">WHERE</span> <span class="string">b.id=1;</span></span><br><span class="line"><span class="comment">#删除黄晓明以及他女朋友的信息</span></span><br><span class="line"><span class="attr">DELETE</span> <span class="string">b,g FROM beauty g</span></span><br><span class="line"><span class="attr">INNER</span> <span class="string">JOIN boys b</span></span><br><span class="line"><span class="attr">ON</span> <span class="string">b.`id`=g.`boyfriend_id`</span></span><br><span class="line"><span class="attr">WHERE</span> <span class="string">b.`boyName`=&#x27;黄晓明&#x27;;</span></span><br><span class="line"><span class="meta">多表删除</span> :<span class="string">TRUNCATE</span></span><br><span class="line"><span class="attr">TRUNCATE</span> <span class="string">TABLE boys</span></span><br></pre></td></tr></table></figure>


<h3 id="四，DDL数据定义语言"><a href="#四，DDL数据定义语言" class="headerlink" title="四，DDL数据定义语言"></a>四，DDL数据定义语言</h3><h4 id="1-库和表的管理"><a href="#1-库和表的管理" class="headerlink" title="1.库和表的管理"></a>1.库和表的管理</h4><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">一，库的管理</span></span><br><span class="line"><span class="meta">创建</span> <span class="string">CREATE</span></span><br><span class="line"><span class="attr">CREATE</span> <span class="string">DATABASE IF NOT EXISTS mydb1 ;</span></span><br><span class="line"><span class="meta">修改</span> <span class="string">ALTER</span></span><br><span class="line"><span class="attr">1.更改字符集</span></span><br><span class="line"><span class="attr">ALTER</span> <span class="string">DATABASE mydb1 CHARACTER SET utf8;</span></span><br><span class="line"><span class="meta">删除</span> <span class="string">DROP</span></span><br><span class="line"><span class="attr">DROP</span> <span class="string">DATABASE IF EXISTS school;</span></span><br><span class="line"><span class="attr">二，表的管理</span></span><br><span class="line"><span class="meta">创建</span> <span class="string">CREATE</span></span><br><span class="line"><span class="attr">CREATE</span> <span class="string">TABLE book(</span></span><br><span class="line"><span class="attr">id</span> <span class="string">INT PRIMARY KEY,</span></span><br><span class="line"><span class="attr">b_name</span> <span class="string">VARCHAR(30),</span></span><br><span class="line"><span class="attr">price</span> <span class="string">DOUBLE,</span></span><br><span class="line"><span class="attr">author_id</span> <span class="string">INT ,</span></span><br><span class="line"><span class="attr">publishDate</span> <span class="string">DATE</span></span><br><span class="line"><span class="attr">);</span></span><br><span class="line"><span class="attr">DESC</span> <span class="string">book ;</span></span><br><span class="line"><span class="attr">CREATE</span> <span class="string">TABLE author(</span></span><br><span class="line"><span class="attr">id</span> <span class="string">INT PRIMARY KEY ,</span></span><br><span class="line"><span class="attr">au_name</span> <span class="string">VARCHAR(20),</span></span><br><span class="line"><span class="attr">nation</span> <span class="string">VARCHAR(10)</span></span><br><span class="line"><span class="attr">);</span></span><br><span class="line"><span class="attr">DESC</span> <span class="string">author;</span></span><br><span class="line"><span class="meta">修改</span> <span class="string">ALTER</span></span><br><span class="line"><span class="attr">1.修改列名</span></span><br><span class="line"><span class="attr">ALTER</span> <span class="string">TABLE book CHANGE COLUMN publishDate pub_date DATETIME;</span></span><br><span class="line"><span class="attr">2.修改列的类型或约束</span></span><br><span class="line"><span class="attr">ALTER</span> <span class="string">TABLE book MODIFY COLUMN pub_date DATE;</span></span><br><span class="line"><span class="attr">3.添加新列</span></span><br><span class="line"><span class="attr">ALTER</span> <span class="string">TABLE author ADD COLUMN annual DOUBLE;</span></span><br><span class="line"><span class="attr">4.删除新列</span></span><br><span class="line"><span class="attr">ALTER</span> <span class="string">TABLE author DROP COLUMN annual;</span></span><br><span class="line"><span class="attr">5.修改表名</span></span><br><span class="line"><span class="attr">ALTER</span> <span class="string">TABLE author RENAME TO book_author;</span></span><br><span class="line"><span class="meta">删除</span>  <span class="string">DROP</span></span><br><span class="line"><span class="attr">DROP</span> <span class="string">TABLE IF EXISTS my_employee;</span></span><br><span class="line"><span class="attr">SHOW</span> <span class="string">TABLES;</span></span><br><span class="line"><span class="attr">复制</span></span><br><span class="line"><span class="attr">1.仅仅复制表的结构</span></span><br><span class="line"><span class="attr">CREATE</span> <span class="string">TABLE copy LIKE book_author;</span></span><br><span class="line"><span class="attr">2.复制表的结构加数据</span></span><br><span class="line"><span class="attr">CREATE</span> <span class="string">TABLE copy2</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string">* FROM book_author;</span></span><br><span class="line"><span class="attr">3.复制部分结构</span></span><br><span class="line"><span class="attr">CREATE</span> <span class="string">TABLE copy3 </span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string">id,au_name</span></span><br><span class="line"><span class="attr">FROM</span> <span class="string">book_author</span></span><br><span class="line"><span class="attr">WHERE</span> <span class="string">id=0;</span></span><br></pre></td></tr></table></figure>


<h4 id="2-数据类型"><a href="#2-数据类型" class="headerlink" title="2.数据类型"></a>2.数据类型</h4><p><strong>数值型</strong><br><strong>1.整型</strong></p>
<table>
<thead>
<tr>
<th>TINYINT</th>
<th>SMALLINT</th>
<th>MEDIUMINT</th>
<th>INT/INTEGER</th>
<th>BIGINT</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>2</td>
<td>3</td>
<td>4</td>
<td>8</td>
</tr>
</tbody></table>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">如何设置无符号和有符号(默认有符号)</span></span><br><span class="line"><span class="attr">DROP</span> <span class="string">TABLE tab_int;</span></span><br><span class="line"><span class="attr">CREATE</span> <span class="string">TABLE tab_int(t1 INT,t2 INT UNSIGNED);</span></span><br><span class="line"><span class="attr">INSERT</span> <span class="string">INTO tab_int(t1,t2) VALUES(-1,1);</span></span><br><span class="line"><span class="attr">DESC</span> <span class="string">tab_int;</span></span><br></pre></td></tr></table></figure>


<p>1）如果插入的数值超出了整形的范围，会报out of range异常，并且插入<br>临界值。<br>2）如果不设置长度，会有默认的长度。<br>长度代表了显示的最大宽度，如果不够会用0在左边填充，但必须搭配<br>zerofill使用。<br><strong>2.小数</strong><br>①定点数<br>dec（M,D）<br>②浮点数<br>float（4） ，double（8）<br>M，D的意思：M指定一共多少位，D指定小数几位，超出会四舍五入。<br>MD都可以省略，<br>如果是dec，则M默认为10，D默认为0<br>如果是浮点数，则会根据插入数值的精度改变精度<br>定点型精度相对较高。<br><strong>3.字符型</strong><br>①较短的文本<br>CHAR(M)默认为1,VARCHAR(M)<br>M:字符数<br>char：固定长度字符，比较耗费空间，但是效率高。<br>varchar：可变长度字符</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">ENUM</span> <span class="string">枚举类</span></span><br><span class="line"><span class="attr">CREATE</span> <span class="string">TABLE tab_char(</span></span><br><span class="line">   <span class="attr">t1</span> <span class="string">ENUM(&#x27;a&#x27;,&#x27;c&#x27;,&#x27;b&#x27;)</span></span><br><span class="line"><span class="attr">);</span></span><br><span class="line"><span class="attr">SET</span> <span class="string">集合</span></span><br><span class="line"><span class="attr">CREATE</span> <span class="string">TABLE tab_set(</span></span><br><span class="line"><span class="attr">s1</span> <span class="string">SET(&#x27;a&#x27;,&#x27;b&#x27;,&#x27;c&#x27;,&#x27;d&#x27;)</span></span><br><span class="line"><span class="attr">);</span></span><br><span class="line"><span class="attr">INSERT</span> <span class="string">INTO tab_set(s1) VALUES(&#x27;a,b&#x27;);</span></span><br></pre></td></tr></table></figure>


<p>BINARY:保存较短的二进制。<br>②较长的文本<br>text（文本）,BLOB(较大的二进制)<br><strong>4.日期型</strong><br>DATE:日期<br>DATETIME:日期加时间，8字节<br>timestamp：跟时区有关系，建议使用，4字节<br>time：时间<br>year：年</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">CREATE</span> <span class="string">TABLE tab_date(</span></span><br><span class="line"><span class="attr">t1</span> <span class="string">DATETIME,</span></span><br><span class="line"><span class="attr">t2</span> <span class="string">TIMESTAMP</span></span><br><span class="line"><span class="attr">);</span></span><br><span class="line"><span class="attr">INSERT</span> <span class="string">INTO tab_date(t1,t2)</span></span><br><span class="line"><span class="attr">VALUES(NOW(),NOW());</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string">* FROM tab_date;</span></span><br><span class="line"><span class="attr">SET</span> <span class="string">time_zone=&#x27;+9:00&#x27;;</span></span><br><span class="line"><span class="comment">#设置时区为东9区</span></span><br></pre></td></tr></table></figure>


<h4 id="3-常见约束"><a href="#3-常见约束" class="headerlink" title="3.常见约束"></a>3.常见约束</h4><p><strong>含义：一种限制，用于限制表中的数据，保证数据的一致性。</strong></p>
<ol>
<li> NOT NULL </li>
<li> DEFAULT </li>
<li> PRIMARY KEY  唯一，且不为空 </li>
<li> UNIQUE  唯一，可以为空 </li>
<li> CHECK Mysql不支持 </li>
<li> FOREIGN KEY 外键约束，用于限制两个表的关系，<br>用于保证该字段的值必须来自于主表的关联列的值。<br>约束的分类：<br>列级约束：除外键约束<br>表级约束：除了非空，默认。<br>CREATE TABLE 表名(<br>字段1 字段类型 列级约束,<br>字段2 字段类型 列级约束,<br>表级约束<br>); </li>
</ol>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#创建表时添加列级约束</span></span><br><span class="line"><span class="attr">DROP</span> <span class="string">TABLE tab_test;</span></span><br><span class="line"><span class="attr">CREATE</span> <span class="string">TABLE tab_test(</span></span><br><span class="line"><span class="attr">id</span> <span class="string">INT PRIMARY KEY,</span></span><br><span class="line"><span class="attr">stu_name</span> <span class="string">VARCHAR(20) NOT NULL,</span></span><br><span class="line"><span class="attr">gender</span> <span class="string">CHAR DEFAULT &#x27;男&#x27;,</span></span><br><span class="line"><span class="attr">seat_id</span> <span class="string">INT UNIQUE, </span></span><br><span class="line"><span class="attr">major_id</span> <span class="string">INT REFERENCES tab_major(id) </span></span><br><span class="line"><span class="attr">);</span></span><br><span class="line"><span class="attr">CREATE</span> <span class="string">TABLE tab_major(</span></span><br><span class="line"><span class="attr">id</span> <span class="string">INT PRIMARY KEY ,</span></span><br><span class="line"><span class="attr">major_name</span> <span class="string">VARCHAR(20) NOT NULL</span></span><br><span class="line"><span class="attr">);</span></span><br><span class="line"><span class="attr">DESC</span> <span class="string">tab_test;</span></span><br><span class="line"><span class="attr">SHOW</span> <span class="string">INDEX FROM tab_test;</span></span><br><span class="line"><span class="comment">#查看索引信息</span></span><br><span class="line"><span class="comment">#添加表级约束</span></span><br><span class="line"><span class="attr">CREATE</span> <span class="string">TABLE tab_test(</span></span><br><span class="line"><span class="attr">id</span> <span class="string">INT PRIMARY KEY AUTO_INCREMENT,</span></span><br><span class="line"><span class="attr">stu_name</span> <span class="string">VARCHAR(20) NOT NULL,</span></span><br><span class="line"><span class="attr">gender</span> <span class="string">CHAR DEFAULT &#x27;男&#x27;,</span></span><br><span class="line"><span class="attr">seat_id</span> <span class="string">INT UNIQUE, </span></span><br><span class="line"><span class="attr">major_id</span> <span class="string">INT ,</span></span><br><span class="line"><span class="attr">CONSTRAINT</span> <span class="string">m_id FOREIGN KEY(major_id) REFERENCES tab_major(id) </span></span><br><span class="line"><span class="attr">);</span></span><br><span class="line"><span class="attr">CONSTRAINT</span> <span class="string">m_id 可以省略</span></span><br></pre></td></tr></table></figure>


<p>面试题：主键约束和唯一约束的区别：<br>都可以保证唯一性，<br>主键不能为空 ，unique 能为空，但是只能有一个null。<br>主键只能有1个，unique可以有多个。<br>都允许两个列组合成一个约束。<br>面试题：外键：<br>要求在从表设置外键关系<br>从表的外键列类型和主表的关联列类型一致，名称无要求<br>要求主表的关联列必须是主键或者唯一键<br>插入数据应该先插入主表再插入从表<br>删除数据应该先删除从表，在删除主表<br>二，修改表时添加约束</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">CREATE</span> <span class="string">TABLE tab_test2(</span></span><br><span class="line"><span class="attr">id</span> <span class="string">INT ,</span></span><br><span class="line"><span class="attr">stu_name</span> <span class="string">VARCHAR(20) ,</span></span><br><span class="line"><span class="attr">gender</span> <span class="string">CHAR ,</span></span><br><span class="line"><span class="attr">seat_id</span> <span class="string">INT , </span></span><br><span class="line"><span class="attr">major_id</span> <span class="string">INT  </span></span><br><span class="line"><span class="attr">);</span></span><br><span class="line"><span class="attr">ALTER</span> <span class="string">TABLE tab_test2 MODIFY COLUMN stu_name  VARCHAR(20) NOT NULL ;</span></span><br><span class="line"><span class="attr">ALTER</span> <span class="string">TABLE tab_test2 MODIFY COLUMN id INT PRIMARY KEY AUTO_INCREMENT;</span></span><br><span class="line"><span class="comment">#添加外键</span></span><br><span class="line"><span class="attr">ALTER</span> <span class="string">TABLE tab_test2 ADD FOREIGN KEY(major_id) REFERENCES tab_major(id);</span></span><br></pre></td></tr></table></figure>


<h4 id="4-标识列"><a href="#4-标识列" class="headerlink" title="4.标识列"></a>4.标识列</h4><p>自增长列 AUTO_INCREMENT<br>特点：<br>1.表示必须和一个key搭配<br>2.一个表最多一个标识列<br>3.标识列类型只能是数值型<br>4.标识列可以通过set auto_increment_increment=3;设置步长</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">CREATE</span> <span class="string">tab_auto(</span></span><br><span class="line"><span class="attr">id</span> <span class="string">INT PRIMARY KEY AUTO_INCREMENT,</span></span><br><span class="line"><span class="attr">NAME</span> <span class="string">VARCHAR(20) NOT NULL</span></span><br><span class="line"><span class="attr">);</span></span><br></pre></td></tr></table></figure>


<h3 id="五，TCL语言：事务控制语言"><a href="#五，TCL语言：事务控制语言" class="headerlink" title="五，TCL语言：事务控制语言"></a>五，TCL语言：事务控制语言</h3><p>事务：一个或一组sql语句组成的执行单元，</p>
<p>要么全部执行,要么都不执行。<br>存储引擎:在MySQL中的数据用各种不同的技术存储在文件中。<br>通过show ENGINES;来查看mysql支持的存储引擎。<br>innodb引擎支持事务。<br>事务的ACID属性：<br>1.原子性:事务是一个不可分割的工作单位，要么都发生，要么都不发生。<br>2.一致性：事务必须使数据库从一个一致性状态变为另一个一致性状态。<br>3.隔离性：一个事务的执行不能被另一个事务干扰。<br>4.持久性：事务一旦被提交，对数据库事务的改变就是永久性的。</p>
<p>DELETE 和 TRUNCATE 在事务中的区别：</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">演示delete</span></span><br><span class="line"><span class="attr">SET</span> <span class="string">autocommit=0;</span></span><br><span class="line"><span class="attr">START</span> <span class="string">TRANSACTION;</span></span><br><span class="line"><span class="attr">DELETE</span> <span class="string">FROM tab_teacher;</span></span><br><span class="line"><span class="attr">ROLLBACK;</span></span><br><span class="line"><span class="meta">演示</span> <span class="string">TRUNCATE</span></span><br><span class="line"><span class="attr">SET</span> <span class="string">autocommit=0;</span></span><br><span class="line"><span class="attr">START</span> <span class="string">TRANSACTION;</span></span><br><span class="line"><span class="attr">TRUNCATE</span>  <span class="string">TABLE tab_teacher;</span></span><br><span class="line"><span class="attr">ROLLBACK;</span></span><br><span class="line"><span class="attr">DELETE</span> <span class="string">是直接删除表中数据，truncate是江表删除，创建一张与原来一样的空表。</span></span><br></pre></td></tr></table></figure>


<h3 id="六，视图"><a href="#六，视图" class="headerlink" title="六，视图"></a>六，视图</h3><p><strong>含义：虚拟表，和普通表格一样使用</strong><br><strong>通过表动态生成的数据</strong></p>
<h4 id="1-创建视图"><a href="#1-创建视图" class="headerlink" title="1.创建视图"></a>1.创建视图</h4><p><strong>语法：</strong><br><strong>CREATE VIEW 视图名</strong><br><strong>AS</strong><br><strong>查询语句 ;</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"># 案例：查询姓名中包含a字符的员工名，部门名和工种信息</span><br><span class="line">create view view1 as</span><br><span class="line">    select e.last_name,d.department_name ,j.job_title from employees e</span><br><span class="line">inner join departments d on e.department_id = d.department_id</span><br><span class="line">    inner join jobs j on e.job_id = j.job_id</span><br><span class="line">where e.last_name like &#x27;%a%&#x27;;</span><br><span class="line">select * from view1;</span><br><span class="line"># 案例：查询各个部门的平均工资级别</span><br><span class="line">create view view2 as</span><br><span class="line">select j.grade_level ,aa.department_id</span><br><span class="line">    from job_grades j</span><br><span class="line">inner join (select avg(salary) avg_s,department_id from employees  group by department_id) aa</span><br><span class="line">    on aa.avg_s between j.lowest_sal and j.highest_sal;</span><br><span class="line">select * from view2;</span><br><span class="line"># 案例：查询平均工资最低的部门信息</span><br><span class="line">create view view3 as</span><br><span class="line">select avg(salary) avg_s ,department_id</span><br><span class="line">from employees</span><br><span class="line">group by department_id</span><br><span class="line">order by avg_s asc</span><br><span class="line">limit 1;</span><br><span class="line">select * from view3;</span><br></pre></td></tr></table></figure>


<h4 id="2-视图修改"><a href="#2-视图修改" class="headerlink" title="2.视图修改"></a>2.视图修改</h4><p><strong>①create OR REPLACE VIEW 视图名 AS 查询语句;</strong><br><strong>②alter VIEW 视图名 AS 查询语句;</strong></p>
<h4 id="3-删除视图"><a href="#3-删除视图" class="headerlink" title="3.删除视图"></a>3.删除视图</h4><p><strong>DROP VIEW v1,v2;</strong></p>
<h4 id="4-查看视图"><a href="#4-查看视图" class="headerlink" title="4.查看视图"></a><strong>4.查看视图</strong></h4><p><strong>DESC v1;</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">#创建视图emp_v1，要求查询电话号码以011开头的员工姓名和工资，邮箱</span><br><span class="line">CREATE VIEW emp_v1 AS</span><br><span class="line">SELECT last_name ,salary,email FROM employees WHERE</span><br><span class="line">phone_number LIKE &#x27;%011&#x27;;</span><br><span class="line">#创建视图emp_v2,要求查询部门的最高工资高于12000的部门信息</span><br><span class="line">CREATE VIEW v4 AS</span><br><span class="line">SELECT department_id FROM employees GROUP BY department_id</span><br><span class="line">HAVING MAX(salary)&gt; 12000;</span><br><span class="line">CREATE VIEW emp_v2 AS</span><br><span class="line">SELECT * FROM departments WHERE department_id IN(SELECT * FROM v4);</span><br></pre></td></tr></table></figure>


<h4 id="5-视图的更新"><a href="#5-视图的更新" class="headerlink" title="5.视图的更新"></a>5.视图的更新</h4><p><strong>视图的可更新性和视图中查询的定义有关，以下类型的视图是不能更新的。</strong><br><strong>1.包含以下关键字的sql语句：分组函数，distinct，group by，having，union</strong><br><strong>2.常量视图</strong><br><strong>3.select中包含子查询的</strong><br><strong>4.join</strong><br><strong>5.from 一个不能更新的视图</strong><br><strong>6.where子句的子查询引用了from子句的表</strong></p>
<h4 id="6-视图和表的对比："><a href="#6-视图和表的对比：" class="headerlink" title="6.视图和表的对比："></a>6.视图和表的对比：</h4><table>
<thead>
<tr>
<th></th>
<th>创建语法的关键字</th>
<th>是否实际占用物理空间</th>
<th>使用</th>
</tr>
</thead>
<tbody><tr>
<td><strong>视图</strong></td>
<td>CREATE VIEW</td>
<td>只是保存了sql逻辑</td>
<td>增删改查，一般不能增删改</td>
</tr>
<tr>
<td><strong>表</strong></td>
<td>CREATE TABLE</td>
<td>占用</td>
<td>增删改查</td>
</tr>
</tbody></table>
<h3 id="七，变量"><a href="#七，变量" class="headerlink" title="七，变量"></a>七，变量</h3><p><strong>系统变量</strong>   ：变量由系统提供，不是用户自定义，属于服务器层面。<br>查看系统所有变量：show GLOBAL VARIABLES;<br>查看满足条件的部分系统变量： SHOW GLOBAL VARIABLES LIKE ‘%char%’;<br>查看指定的某个系统变量的值： SELECT  @@global.autocommit;<br>为某个系统变量赋值：set @@global.系统变量名=值;<br><strong>全局变量:GLOBAL</strong><br>作用域：服务器每次启动将为所有的全局变量赋初始值，针对于所有的会话有效，但不能<br>跨重启。<br><strong>会话变量:SESSION</strong><br>作用域：针对当前的会话有效。<br>用户自定义变量<br><strong>用户变量</strong><br>声明： SET/SELECT  @用户变量名 :=值;<br>赋值：通过 SELECT 字段  INTO 变量名;或 SET/SELECT  @用户变量名 :=值;<br>使用：select @用户变量名;<br>应用在任何地方。<br>作用域：针对当前会话和连接有效。<br><strong>局部变量</strong><br>作用域：作用在定义它的begin END 块中。<br>声明： DECLARE 变量名 类型  （default 值）;<br>赋值：通过 SELECT 字段  INTO 变量名;或 SET/SELECT  @变量名 :=值;<br>使用：select @变量名;<br>只能放在begin END 中的第一句话</p>
<h3 id="八，存储过程和函数"><a href="#八，存储过程和函数" class="headerlink" title="八，存储过程和函数"></a>八，存储过程和函数</h3><h4 id="存储过程："><a href="#存储过程：" class="headerlink" title="存储过程："></a>存储过程：</h4><p><strong>一组预先定义好的sql语句集合，理解成批处理语句。</strong><br>1.提高代码的重用性<br>2.简化操作<br>3.减少了编译次数并且减少了和数据库服务器的连接次数，提高了效率。</p>
<h5 id="1-创建语法："><a href="#1-创建语法：" class="headerlink" title="1.创建语法："></a>1.创建语法：</h5><p>CREATE PROCEDURE 存储过程名（参数列表）<br>BEGIN<br>一组合法的sql语句;<br>END<br>参数列表：参数模式 参数名 参数类型</p>
<p>参数模式：<br>in：该参数可以作为输入，也就是该参数需要调用方传入值<br>OUT  ：该参数可以作为输出，也就是该参数可以作为返回值<br>inout：该参数既可以作为输入又可以作为输出</p>
<p>如果存储过程只有一句话，begin END 可以省略</p>
<p>存储过程体中的每条sql语句的结尾需要必须加分号，<br>存储过程的结尾可以使用 DELIMITER 重新设置。</p>
<h5 id="2-调用"><a href="#2-调用" class="headerlink" title="2.调用"></a>2.调用</h5><p>CALL 存储过程名（实参列表）;</p>
<h5 id="3-案例"><a href="#3-案例" class="headerlink" title="3.案例"></a>3.案例</h5><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#插入到admin表中五条记录</span></span><br><span class="line"><span class="attr">DELIMITER</span> <span class="string">$</span></span><br><span class="line"><span class="attr">CREATE</span> <span class="string">PROCEDURE my_a()</span></span><br><span class="line"><span class="attr">BEGIN</span></span><br><span class="line"><span class="attr">INSERT</span> <span class="string">INTO admin(username,PASSWORD) VALUES(&#x27;yin&#x27;,&#x27;666&#x27;);</span></span><br><span class="line"><span class="attr">INSERT</span> <span class="string">INTO admin(username,PASSWORD) VALUES(&#x27;aa&#x27;,&#x27;123&#x27;);</span></span><br><span class="line"><span class="attr">INSERT</span> <span class="string">INTO admin(username,PASSWORD) VALUES(&#x27;bb&#x27;,&#x27;666&#x27;);</span></span><br><span class="line"><span class="attr">INSERT</span> <span class="string">INTO admin(username,PASSWORD) VALUES(&#x27;cc&#x27;,&#x27;123&#x27;);</span></span><br><span class="line"><span class="attr">INSERT</span> <span class="string">INTO admin(username,PASSWORD) VALUES(&#x27;dd&#x27;,&#x27;666&#x27;);</span></span><br><span class="line"></span><br><span class="line"><span class="attr">END</span> <span class="string">$</span></span><br><span class="line"><span class="comment">#创建存储过程实现 根据女生名查询对应的男生信息</span></span><br><span class="line"><span class="attr">DELIMITER</span> <span class="string">$</span></span><br><span class="line"><span class="attr">CREATE</span> <span class="string">PROCEDURE my_b(IN beauty_name VARCHAR(20))</span></span><br><span class="line"><span class="attr">BEGIN</span> <span class="string"></span></span><br><span class="line">      <span class="attr">SELECT</span> <span class="string">bo.*</span></span><br><span class="line">      <span class="attr">FROM</span> <span class="string">boys bo</span></span><br><span class="line">      <span class="attr">RIGHT</span> <span class="string">JOIN beauty b ON bo.id=b.boyfriend_id</span></span><br><span class="line">      <span class="attr">WHERE</span> <span class="string">b.name=beauty_name;</span></span><br><span class="line"><span class="attr">END</span> <span class="string">$</span></span><br><span class="line"><span class="attr">CALL</span> <span class="string">my_b(&#x27;热巴&#x27;);</span></span><br><span class="line"><span class="comment">#根据女生名返回他的男朋友名</span></span><br><span class="line"><span class="attr">DELIMITER</span> <span class="string">$</span></span><br><span class="line"><span class="attr">CREATE</span> <span class="string">PROCEDURE my_d(IN beautyName VARCHAR(20),OUT boyName VARCHAR(20))</span></span><br><span class="line"><span class="attr">BEGIN</span></span><br><span class="line">        <span class="attr">SELECT</span> <span class="string">bo.boyName INTO boyName</span></span><br><span class="line">        <span class="attr">FROM</span> <span class="string">boys bo</span></span><br><span class="line">        <span class="attr">INNER</span> <span class="string">JOIN beauty b ON bo.id=b.boyfriend_id</span></span><br><span class="line">        <span class="attr">WHERE</span> <span class="string">b.name=beautyName;</span></span><br><span class="line"><span class="attr">END</span> <span class="string">$</span></span><br><span class="line"></span><br><span class="line"><span class="attr">CALL</span> <span class="string">my_d(&#x27;小昭&#x27;,@b_name);</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string">@b_name;</span></span><br><span class="line"><span class="comment">#传入两个值a，b，最终翻倍返回a和b</span></span><br><span class="line"><span class="attr">DELIMITER</span> <span class="string">$</span></span><br><span class="line"><span class="attr">CREATE</span> <span class="string">PROCEDURE my_e(INOUT a INT ,INOUT b INT )</span></span><br><span class="line"><span class="attr">BEGIN</span></span><br><span class="line">        <span class="attr">SET</span> <span class="string">a=a*2;</span></span><br><span class="line">        <span class="attr">SET</span> <span class="string">b=b*2;</span></span><br><span class="line"><span class="attr">END</span> <span class="string">$</span></span><br><span class="line"><span class="attr">SET</span> <span class="string">@m=10;</span></span><br><span class="line"><span class="attr">SET</span> <span class="string">@n=20;</span></span><br><span class="line"><span class="attr">CALL</span> <span class="string">my_e(@m,@n);</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string">@m,@n;</span></span><br></pre></td></tr></table></figure>


<h5 id="4-删除存储过程"><a href="#4-删除存储过程" class="headerlink" title="4.删除存储过程"></a>4.删除存储过程</h5><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">DROP</span> <span class="string">PROCEDURE 存储过程名</span></span><br><span class="line"><span class="attr">DROP</span> <span class="string">PROCEDURE my_a;</span></span><br></pre></td></tr></table></figure>


<h5 id="5-查看存储过程的信息"><a href="#5-查看存储过程的信息" class="headerlink" title="5.查看存储过程的信息"></a>5.查看存储过程的信息</h5><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">SHOW</span> <span class="string">CREATE PROCEDURE  my_b;</span></span><br></pre></td></tr></table></figure>


<h4 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h4><p><strong>存储过程可以有0/n个返回值：适合批量增删改</strong><br><strong>函数有且仅有一个返回值：适合查询</strong></p>
<h5 id="1-创建"><a href="#1-创建" class="headerlink" title="1.创建"></a>1.创建</h5><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">DELIMITER</span> <span class="string">$</span></span><br><span class="line"><span class="attr">CREATE</span> <span class="string">FUNCTION 函数名(参数列表) RETURNS 返回类型</span></span><br><span class="line"><span class="attr">BEGIN</span></span><br><span class="line"></span><br><span class="line"><span class="attr">END</span></span><br></pre></td></tr></table></figure>


<p>注意：<br>参数列表：参数名，参数类型<br>一定会有return语句</p>
<h5 id="2-使用"><a href="#2-使用" class="headerlink" title="2.使用"></a>2.使用</h5><p><strong>SELECT 函数名(参数列表)</strong></p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#返回公司员工个数</span></span><br><span class="line"><span class="attr">DELIMITER</span> <span class="string">$</span></span><br><span class="line"><span class="attr">CREATE</span> <span class="string">FUNCTION my_f1() RETURNS INT</span></span><br><span class="line"><span class="attr">BEGIN</span></span><br><span class="line"><span class="attr">DECLARE</span> <span class="string">c INT DEFAULT 0 ;</span></span><br><span class="line">    <span class="attr">SELECT</span> <span class="string">COUNT(*) INTO c FROM employees;</span></span><br><span class="line">    <span class="attr">RETURN</span> <span class="string">c;</span></span><br><span class="line"><span class="attr">END</span> <span class="string">$</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string">my_f1();</span></span><br><span class="line"><span class="comment">#根据员工名返回他的工资</span></span><br><span class="line"><span class="attr">DELIMITER</span> <span class="string">$</span></span><br><span class="line"><span class="attr">CREATE</span> <span class="string">FUNCTION my_f2(NAME VARCHAR(20)) RETURNS DOUBLE</span></span><br><span class="line"><span class="attr">BEGIN</span> <span class="string"></span></span><br><span class="line"><span class="attr">DECLARE</span> <span class="string">c DOUBLE;</span></span><br><span class="line">     <span class="attr">SELECT</span> <span class="string">salary INTO c FROM employees WHERE last_name=NAME;</span></span><br><span class="line">     <span class="attr">RETURN</span> <span class="string">c;</span></span><br><span class="line"><span class="attr">END</span> <span class="string">$</span></span><br><span class="line"><span class="attr">SET</span> <span class="string">@a=&#x27;Hunold&#x27;;</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string">my_f2(@a);</span></span><br></pre></td></tr></table></figure>


<h5 id="3-查看"><a href="#3-查看" class="headerlink" title="3.查看"></a>3.查看</h5><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">SHOW</span> <span class="string">CREATE FUNCTION my_f2;</span></span><br></pre></td></tr></table></figure>


<h5 id="4-删除"><a href="#4-删除" class="headerlink" title="4.删除"></a>4.删除</h5><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">DROP</span> <span class="string">FUNCTION my_f2;</span></span><br></pre></td></tr></table></figure>


<h3 id="九，流程控制"><a href="#九，流程控制" class="headerlink" title="九，流程控制"></a>九，流程控制</h3><h4 id="分支结构"><a href="#分支结构" class="headerlink" title="分支结构"></a>分支结构</h4><h5 id="1-if-（表达式1，表达式2，表达式3）"><a href="#1-if-（表达式1，表达式2，表达式3）" class="headerlink" title="1.if （表达式1，表达式2，表达式3）"></a>1.if （表达式1，表达式2，表达式3）</h5><p>如果表达式1成立，就返回表达式2的值，否则返回表达式3的值。<br>应用在任何地方</p>
<h5 id="2-case"><a href="#2-case" class="headerlink" title="2.case"></a>2.case</h5><h6 id="1-switch-CASE"><a href="#1-switch-CASE" class="headerlink" title="1)switch-CASE"></a>1)switch-CASE</h6><p><strong>语法:</strong><br><strong>CASE 要判断的字段或者表达式</strong><br><strong>WHEN 常量1 THEN 要显示的值1或者语句1</strong><br><strong>WHEN 常量2 THEN 要显示的值2或者语句2</strong><br><strong>…</strong><br><strong>ELSE 要显示的值n或者语句n；</strong></p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">案例：查询员工的工资，要求</span></span><br><span class="line"><span class="meta">部门号</span>=<span class="string">=30，显示的工资为1.1倍，</span></span><br><span class="line"><span class="meta">部门号</span>=<span class="string">=40，显示的工资为1.2倍，</span></span><br><span class="line"><span class="meta">部门号</span>=<span class="string">=50，显示的工资为1.3倍，</span></span><br><span class="line"><span class="attr">其他部门，显示原有工资。</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string"></span></span><br><span class="line">  <span class="attr">salary</span> <span class="string">AS 原始工资,</span></span><br><span class="line">  <span class="attr">department_id</span> <span class="string">,</span></span><br><span class="line">  <span class="attr">CASE</span></span><br><span class="line">    <span class="attr">department_id</span> <span class="string"></span></span><br><span class="line">    <span class="attr">WHEN</span> <span class="string">30 </span></span><br><span class="line">    <span class="attr">THEN</span> <span class="string">salary * 1.1 </span></span><br><span class="line">    <span class="attr">WHEN</span> <span class="string">40 </span></span><br><span class="line">    <span class="attr">THEN</span> <span class="string">salary * 1.2 </span></span><br><span class="line">    <span class="attr">WHEN</span> <span class="string">50 </span></span><br><span class="line">    <span class="attr">THEN</span> <span class="string">salary * 1.3 </span></span><br><span class="line">    <span class="attr">ELSE</span> <span class="string">salary </span></span><br><span class="line">  <span class="attr">END</span> <span class="string">AS 新工资 </span></span><br><span class="line"><span class="attr">FROM</span></span><br><span class="line">  <span class="attr">employees</span> <span class="string">;</span></span><br></pre></td></tr></table></figure>


<h6 id="2-CASE-使用2："><a href="#2-CASE-使用2：" class="headerlink" title="2)CASE 使用2："></a>2)CASE 使用2：</h6><p><strong>语法：</strong><br><strong>CASE</strong><br><strong>WHEN 条件1 THEN 要显示的值1或语句1</strong><br><strong>WHEN 条件2 THEN 要显示的值2或语句2</strong><br><strong>…</strong><br><strong>ELSE 要显示的值n或语句n</strong><br><strong>END</strong></p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">案例：查询员工的工资情况</span></span><br><span class="line"><span class="attr">如果&gt;2w，显示A</span></span><br><span class="line"><span class="attr">如果&gt;1.5w，显示B</span></span><br><span class="line"><span class="attr">如果&gt;1w，显示C</span></span><br><span class="line"><span class="attr">否则，显示D</span></span><br><span class="line"><span class="attr">SELECT</span> <span class="string"></span></span><br><span class="line">  <span class="attr">salary,</span></span><br><span class="line">  <span class="attr">CASE</span></span><br><span class="line">    <span class="attr">WHEN</span> <span class="string">salary &gt; 20000 </span></span><br><span class="line">    <span class="attr">THEN</span> <span class="string">&#x27;A&#x27; </span></span><br><span class="line">    <span class="attr">WHEN</span> <span class="string">salary &gt; 15000 </span></span><br><span class="line">    <span class="attr">THEN</span> <span class="string">&#x27;B&#x27; </span></span><br><span class="line">    <span class="attr">WHEN</span> <span class="string">salary &gt; 10000 </span></span><br><span class="line">    <span class="attr">THEN</span> <span class="string">&#x27;C&#x27; </span></span><br><span class="line">    <span class="attr">ELSE</span> <span class="string">&#x27;D&#x27; </span></span><br><span class="line">  <span class="attr">END</span> <span class="string">AS 工资等级 FROM employees </span></span><br><span class="line"> <span class="attr">可以放在任何地方</span></span><br><span class="line"><span class="comment"> #创建存储过程，根据传入的成绩，显示等级，90A,80B，70C，60D ，F</span></span><br><span class="line"> <span class="attr">DELIMITER</span> <span class="string">$</span></span><br><span class="line"> <span class="attr">CREATE</span> <span class="string">PROCEDURE my_1(IN score INT)</span></span><br><span class="line"> <span class="attr">BEGIN</span></span><br><span class="line"> <span class="attr">CASE</span> <span class="string"></span></span><br><span class="line"> <span class="attr">WHEN</span>  <span class="string">score BETWEEN 90 AND 100</span></span><br><span class="line"> <span class="attr">THEN</span>  <span class="string">SELECT &#x27;A&#x27;;</span></span><br><span class="line">  <span class="attr">WHEN</span>  <span class="string">score BETWEEN 80 AND 90</span></span><br><span class="line"> <span class="attr">THEN</span>  <span class="string">SELECT &#x27;B&#x27;;</span></span><br><span class="line">  <span class="attr">WHEN</span>  <span class="string">score BETWEEN 70 AND 80</span></span><br><span class="line"> <span class="attr">THEN</span>  <span class="string">SELECT &#x27;C&#x27;;</span></span><br><span class="line">  <span class="attr">WHEN</span>  <span class="string">score BETWEEN 70 AND 60</span></span><br><span class="line"> <span class="attr">THEN</span>  <span class="string">SELECT &#x27;D&#x27;;</span></span><br><span class="line"> <span class="attr">ELSE</span> <span class="string">SELECT &#x27;E&#x27;;</span></span><br><span class="line"> <span class="attr">END</span> <span class="string">CASE;</span></span><br><span class="line"> <span class="attr">END</span> <span class="string">$</span></span><br><span class="line"><span class="attr">CALL</span> <span class="string">my_1(95);</span></span><br></pre></td></tr></table></figure>


<h5 id="3-if"><a href="#3-if" class="headerlink" title="3.if"></a>3.if</h5><p><strong>语法：</strong><br><strong>IF 条件1 THEN 语句1;</strong><br><strong>ELSEIF 条件2 THEN 语句2;</strong><br><strong>…</strong><br><strong>ELSE 语句n;</strong><br><strong>END IF;</strong><br>只能用在begin end中</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#创建存储过程，根据传入的成绩，返回等级，90A,80B，70C，60D ，F</span></span><br><span class="line"><span class="attr">DELIMITER</span> <span class="string">$</span></span><br><span class="line"> <span class="attr">CREATE</span> <span class="string">FUNCTION my_2( score INT) RETURNS CHAR</span></span><br><span class="line"> <span class="attr">BEGIN</span> <span class="string"></span></span><br><span class="line"></span><br><span class="line">   <span class="attr">IF</span> <span class="string">score &gt;=90 THEN RETURN&#x27;A&#x27;;</span></span><br><span class="line">   <span class="attr">ELSEIF</span> <span class="string">score &gt;=80 THEN RETURN&#x27;B&#x27;;</span></span><br><span class="line">   <span class="attr">ELSEIF</span> <span class="string">score &gt;=70 THEN RETURN&#x27;C&#x27;;</span></span><br><span class="line">   <span class="attr">ELSEIF</span> <span class="string">score &gt;=60 THEN RETURN&#x27;D&#x27;;</span></span><br><span class="line">   <span class="attr">ELSE</span> <span class="string">RETURN&#x27;E&#x27;;</span></span><br><span class="line">   <span class="attr">END</span> <span class="string">IF;</span></span><br><span class="line"> <span class="attr">END</span> <span class="string">$</span></span><br><span class="line"> <span class="attr">SELECT</span>  <span class="string">my_2(85);</span></span><br></pre></td></tr></table></figure>


<h4 id="循环结构"><a href="#循环结构" class="headerlink" title="循环结构"></a>循环结构</h4><p><strong>在存储过程或函数里面使用</strong></p>
<h5 id="1-while"><a href="#1-while" class="headerlink" title="1.while"></a>1.while</h5><p><strong>语法：</strong><br><strong>标签:WHILE 循环条件 DO</strong><br><strong>循环体;</strong><br><strong>END WHILE 标签;</strong><br><strong>循环控制和标签搭配使用</strong></p>
<h5 id="2-loop"><a href="#2-loop" class="headerlink" title="2.loop"></a>2.loop</h5><p><strong>语法：</strong><br><strong>标签： LOOP</strong><br><strong>循环体;</strong><br><strong>END LOOP 标签;</strong></p>
<h5 id="3-repeat"><a href="#3-repeat" class="headerlink" title="3.repeat"></a>3.repeat</h5><p><strong>语法：</strong><br><strong>标签： REPEAT</strong><br><strong>循环体;</strong><br><strong>UNTIL 结束循环的条件</strong><br><strong>END REPEAT 标签;</strong></p>
<p>循环控制<br>ITERATE 类似continue<br>LEAVE   类似break</p>
<hr>
<p>left join==left outer join</p>
<p>a left join b 就是取a和b的交集加a剩下的部分</p>
<p>inner join</p>
<p>a inner join b就是取交集</p>
<hr>
<p><img src="https://cdn.nlark.com/yuque/0/2022/jpeg/12610368/1641814968278-9ad396b9-3c05-4a17-816c-26b50cd647c2.jpeg" alt="夜拍.jpeg"></p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">二十</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://yinhuidong.github.io/2022/01/01/MySQL/MySQL[%E4%B8%80]%E5%85%A5%E9%97%A8/">https://yinhuidong.github.io/2022/01/01/MySQL/MySQL[一]入门/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://yinhuidong.github.io" target="_blank">二十</a> 许可协议。转载请注明来自 <a href="https://yinhuidong.github.io" target="_blank">二十</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/MySQL/">MySQL</a></div><div class="post_share"><div class="social-share" data-image="/images/cover/mysql.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button button--animated"><i class="fas fa-qrcode"></i> 打赏</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/img/wechat_pay.jpg" target="_blank"><img class="post-qr-code-img" src="/img/wechat_pay.jpg" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="/img/alipay.jpg" target="_blank"><img class="post-qr-code-img" src="/img/alipay.jpg" alt="支付宝"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2022/01/02/Spring/Spring%5B%E4%BA%8C%5DIoc%E5%AE%B9%E5%99%A8%E7%9A%84%E5%88%9D%E5%A7%8B%E5%8C%96/"><img class="prev-cover" src="/images/cover/spring.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Spring[二]IOC容器初始化</div></div></a></div><div class="next-post pull-right"><a href="/2022/01/01/Spring/Spring%5B%E4%B8%80%5D%E5%88%9D%E5%A7%8B%E5%8C%96Web%E4%B8%89%E5%A4%A7%E7%BB%84%E4%BB%B6/"><img class="next-cover" src="/images/cover/spring.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Spring[一]初始化WEB组件</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2022/01/07/MySQL/MySQL%5B%E4%B8%83%5D%E5%9F%BA%E4%BA%8E%E6%88%90%E6%9C%AC%E7%9A%84%E4%BC%98%E5%8C%96/" title="MySQL[七]基于成本的优化"><img class="cover" src="/images/cover/mysql.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-01-07</div><div class="title">MySQL[七]基于成本的优化</div></div></a></div><div><a href="/2022/01/09/MySQL/MySQL%5B%E4%B9%9D%5D%E5%9F%BA%E4%BA%8E%E8%A7%84%E5%88%99%E7%9A%84%E4%BC%98%E5%8C%96&%E5%AD%90%E6%9F%A5%E8%AF%A2%E4%BC%98%E5%8C%96/" title="MySQL[九]基于规则的优化&子查询优化"><img class="cover" src="/images/cover/mysql.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-01-09</div><div class="title">MySQL[九]基于规则的优化&子查询优化</div></div></a></div><div><a href="/2021/12/01/MySQL/MySQL5.7%E5%AE%89%E8%A3%85%E6%96%87%E6%A1%A3/" title="MySQL[前置]Windows下安装MySQL57"><img class="cover" src="/images/cover/mysql.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-12-01</div><div class="title">MySQL[前置]Windows下安装MySQL57</div></div></a></div><div><a href="/2022/01/03/MySQL/MySQL%5B%E4%B8%89%5DInnoDB%E7%B4%A2%E5%BC%95%E7%BB%93%E6%9E%84/" title="MySQL[三]InnoDB索引结构"><img class="cover" src="/images/cover/mysql.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-01-03</div><div class="title">MySQL[三]InnoDB索引结构</div></div></a></div><div><a href="/2022/01/21/MySQL/MySQL%5B%E4%BA%8C%E5%8D%81%E4%B8%80%5DLIMIT/" title="MySQL[二十一]LIMIT"><img class="cover" src="/images/cover/mysql.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-01-21</div><div class="title">MySQL[二十一]LIMIT</div></div></a></div><div><a href="/2022/01/22/MySQL/MySQL%5B%E4%BA%8C%E5%8D%81%E4%BA%8C%5DCOUNT/" title="MySQL[二十二]COUNT"><img class="cover" src="/images/cover/mysql.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-01-22</div><div class="title">MySQL[二十二]COUNT</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/head.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">二十</div><div class="author-info__description">欢迎来到二十的博客....</div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">128</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">标签</div><div class="length-num">14</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">分类</div><div class="length-num">13</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/yinhuidong"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/yinhuidong" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:1972039773@qq.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content">欢迎来到二十的个人博客，联系作者：VX：yinhuidong666</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80%EF%BC%8CMYSQL%E5%85%A5%E9%97%A8"><span class="toc-text">一，MYSQL入门</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9B%B8%E5%85%B3%E6%A6%82%E5%BF%B5"><span class="toc-text">1.数据库相关概念</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E5%A5%BD%E5%A4%84"><span class="toc-text">2.数据库的好处</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AD%98%E5%82%A8%E6%95%B0%E6%8D%AE%E7%89%B9%E7%82%B9"><span class="toc-text">3.数据库存储数据特点</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-mysql%E7%9A%84%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8"><span class="toc-text">4.mysql的安装与使用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-Mysql%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4"><span class="toc-text">5.Mysql常用命令</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-mysql%E8%AF%AD%E6%B3%95%E8%A7%84%E8%8C%83"><span class="toc-text">6.mysql语法规范</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C%EF%BC%8CDQL%E6%9F%A5%E8%AF%A2%E8%AF%AD%E8%A8%80"><span class="toc-text">二，DQL查询语言</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%9F%BA%E7%A1%80%E6%9F%A5%E8%AF%A2"><span class="toc-text">1.基础查询</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E6%9D%A1%E4%BB%B6%E6%9F%A5%E8%AF%A2"><span class="toc-text">2.条件查询</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A0%E6%8C%89%E7%85%A7%E6%9D%A1%E4%BB%B6%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%AD%9B%E9%80%89"><span class="toc-text">①按照条件表达式筛选</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A1%E6%8C%89%E7%85%A7%E9%80%BB%E8%BE%91%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%AD%9B%E9%80%89"><span class="toc-text">②按照逻辑表达式筛选</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A2%E6%A8%A1%E7%B3%8A%E6%9F%A5%E8%AF%A2"><span class="toc-text">③模糊查询</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A3IF-null%E7%9A%84%E4%BD%BF%E7%94%A8%EF%BC%9A"><span class="toc-text">④IF null的使用：</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E6%8E%92%E5%BA%8F%E6%9F%A5%E8%AF%A2"><span class="toc-text">3.排序查询</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E5%B8%B8%E8%A7%81%E5%87%BD%E6%95%B0"><span class="toc-text">4.常见函数</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E5%8D%95%E8%A1%8C%E5%87%BD%E6%95%B0"><span class="toc-text">1.单行函数</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1-%E5%AD%97%E7%AC%A6%E5%87%BD%E6%95%B0"><span class="toc-text">1.字符函数</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#2-%E6%95%B0%E5%AD%A6%E5%87%BD%E6%95%B0"><span class="toc-text">2.数学函数</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3-%E6%97%A5%E6%9C%9F%E5%87%BD%E6%95%B0"><span class="toc-text">3.日期函数</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#4-%E5%85%B6%E4%BB%96%E5%87%BD%E6%95%B0"><span class="toc-text">4.其他函数</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#5-%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6%E5%87%BD%E6%95%B0"><span class="toc-text">5.流程控制函数</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E5%88%86%E7%BB%84%E5%87%BD%E6%95%B0"><span class="toc-text">2.分组函数</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-%E5%88%86%E7%BB%84%E6%9F%A5%E8%AF%A2"><span class="toc-text">5.分组查询</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2"><span class="toc-text">6.连接查询</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E7%AD%89%E5%80%BC%E8%BF%9E%E6%8E%A5"><span class="toc-text">1.等值连接</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E9%9D%9E%E7%AD%89%E5%80%BC%E8%BF%9E%E6%8E%A5"><span class="toc-text">2.非等值连接</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-%E8%87%AA%E8%BF%9E%E6%8E%A5"><span class="toc-text">3.自连接</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-%E5%86%85%E8%BF%9E%E6%8E%A5"><span class="toc-text">4.内连接</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#5-%E5%B7%A6%E5%A4%96%E8%BF%9E%E6%8E%A5"><span class="toc-text">5.左外连接</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#6-%E4%BA%A4%E5%8F%89%E8%BF%9E%E6%8E%A5"><span class="toc-text">6.交叉连接</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="toc-text">7.子查询</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1%EF%BC%89where%E6%88%96having%E5%90%8E%E9%9D%A2"><span class="toc-text">1）where或having后面</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2%EF%BC%89SELECT-%E5%90%8E%E9%9D%A2"><span class="toc-text">2）SELECT 后面</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3%EF%BC%89FROM-%E5%90%8E%E9%9D%A2"><span class="toc-text">3）FROM 后面</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4%EF%BC%89exists%E5%90%8E%E9%9D%A2%EF%BC%88%E7%9B%B8%E5%85%B3%E5%AD%90%E6%9F%A5%E8%AF%A2%EF%BC%89"><span class="toc-text">4）exists后面（相关子查询）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#5%EF%BC%89%E5%AD%90%E6%9F%A5%E8%AF%A2%E7%BB%8F%E5%85%B8%E6%A1%88%E4%BE%8B%E7%A5%A5%E8%AE%B2"><span class="toc-text">5）子查询经典案例祥讲</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-%E5%88%86%E9%A1%B5%E6%9F%A5%E8%AF%A2"><span class="toc-text">8.分页查询</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-%E8%81%94%E5%90%88%E6%9F%A5%E8%AF%A2"><span class="toc-text">9.联合查询</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%89%EF%BC%8CDML%E6%95%B0%E6%8D%AE%E6%93%8D%E4%BD%9C%E8%AF%AD%E8%A8%80"><span class="toc-text">三，DML数据操作语言</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%9B%EF%BC%8CDDL%E6%95%B0%E6%8D%AE%E5%AE%9A%E4%B9%89%E8%AF%AD%E8%A8%80"><span class="toc-text">四，DDL数据定义语言</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%BA%93%E5%92%8C%E8%A1%A8%E7%9A%84%E7%AE%A1%E7%90%86"><span class="toc-text">1.库和表的管理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-text">2.数据类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E5%B8%B8%E8%A7%81%E7%BA%A6%E6%9D%9F"><span class="toc-text">3.常见约束</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E6%A0%87%E8%AF%86%E5%88%97"><span class="toc-text">4.标识列</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%94%EF%BC%8CTCL%E8%AF%AD%E8%A8%80%EF%BC%9A%E4%BA%8B%E5%8A%A1%E6%8E%A7%E5%88%B6%E8%AF%AD%E8%A8%80"><span class="toc-text">五，TCL语言：事务控制语言</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%AD%EF%BC%8C%E8%A7%86%E5%9B%BE"><span class="toc-text">六，视图</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%88%9B%E5%BB%BA%E8%A7%86%E5%9B%BE"><span class="toc-text">1.创建视图</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E8%A7%86%E5%9B%BE%E4%BF%AE%E6%94%B9"><span class="toc-text">2.视图修改</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E5%88%A0%E9%99%A4%E8%A7%86%E5%9B%BE"><span class="toc-text">3.删除视图</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E6%9F%A5%E7%9C%8B%E8%A7%86%E5%9B%BE"><span class="toc-text">4.查看视图</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-%E8%A7%86%E5%9B%BE%E7%9A%84%E6%9B%B4%E6%96%B0"><span class="toc-text">5.视图的更新</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-%E8%A7%86%E5%9B%BE%E5%92%8C%E8%A1%A8%E7%9A%84%E5%AF%B9%E6%AF%94%EF%BC%9A"><span class="toc-text">6.视图和表的对比：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%83%EF%BC%8C%E5%8F%98%E9%87%8F"><span class="toc-text">七，变量</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%AB%EF%BC%8C%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B%E5%92%8C%E5%87%BD%E6%95%B0"><span class="toc-text">八，存储过程和函数</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B%EF%BC%9A"><span class="toc-text">存储过程：</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E5%88%9B%E5%BB%BA%E8%AF%AD%E6%B3%95%EF%BC%9A"><span class="toc-text">1.创建语法：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E8%B0%83%E7%94%A8"><span class="toc-text">2.调用</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-%E6%A1%88%E4%BE%8B"><span class="toc-text">3.案例</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-%E5%88%A0%E9%99%A4%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B"><span class="toc-text">4.删除存储过程</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#5-%E6%9F%A5%E7%9C%8B%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B%E7%9A%84%E4%BF%A1%E6%81%AF"><span class="toc-text">5.查看存储过程的信息</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%87%BD%E6%95%B0"><span class="toc-text">函数</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E5%88%9B%E5%BB%BA"><span class="toc-text">1.创建</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E4%BD%BF%E7%94%A8"><span class="toc-text">2.使用</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-%E6%9F%A5%E7%9C%8B"><span class="toc-text">3.查看</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-%E5%88%A0%E9%99%A4"><span class="toc-text">4.删除</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B9%9D%EF%BC%8C%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6"><span class="toc-text">九，流程控制</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%86%E6%94%AF%E7%BB%93%E6%9E%84"><span class="toc-text">分支结构</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-if-%EF%BC%88%E8%A1%A8%E8%BE%BE%E5%BC%8F1%EF%BC%8C%E8%A1%A8%E8%BE%BE%E5%BC%8F2%EF%BC%8C%E8%A1%A8%E8%BE%BE%E5%BC%8F3%EF%BC%89"><span class="toc-text">1.if （表达式1，表达式2，表达式3）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-case"><span class="toc-text">2.case</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1-switch-CASE"><span class="toc-text">1)switch-CASE</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#2-CASE-%E4%BD%BF%E7%94%A82%EF%BC%9A"><span class="toc-text">2)CASE 使用2：</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-if"><span class="toc-text">3.if</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BE%AA%E7%8E%AF%E7%BB%93%E6%9E%84"><span class="toc-text">循环结构</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-while"><span class="toc-text">1.while</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-loop"><span class="toc-text">2.loop</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-repeat"><span class="toc-text">3.repeat</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2022/01/24/MySQL/MySQL%5B%E4%BA%8C%E5%8D%81%E5%9B%9B%5D%E4%B8%A4%E9%98%B6%E6%AE%B5%E6%8F%90%E4%BA%A4/" title="MySQL[二十四]两阶段提交"><img src="/images/cover/mysql.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="MySQL[二十四]两阶段提交"/></a><div class="content"><a class="title" href="/2022/01/24/MySQL/MySQL%5B%E4%BA%8C%E5%8D%81%E5%9B%9B%5D%E4%B8%A4%E9%98%B6%E6%AE%B5%E6%8F%90%E4%BA%A4/" title="MySQL[二十四]两阶段提交">MySQL[二十四]两阶段提交</a><time datetime="2022-01-23T16:00:00.000Z" title="发表于 2022-01-24 00:00:00">2022-01-24</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/01/23/MySQL/MySQL%5B%E4%BA%8C%E5%8D%81%E4%B8%89%5D%E4%BA%8C%E8%BF%9B%E5%88%B6%E6%97%A5%E5%BF%97/" title="MySQL[二十三]二进制日志"><img src="/images/cover/mysql.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="MySQL[二十三]二进制日志"/></a><div class="content"><a class="title" href="/2022/01/23/MySQL/MySQL%5B%E4%BA%8C%E5%8D%81%E4%B8%89%5D%E4%BA%8C%E8%BF%9B%E5%88%B6%E6%97%A5%E5%BF%97/" title="MySQL[二十三]二进制日志">MySQL[二十三]二进制日志</a><time datetime="2022-01-22T16:00:00.000Z" title="发表于 2022-01-23 00:00:00">2022-01-23</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/01/22/MySQL/MySQL%5B%E4%BA%8C%E5%8D%81%E4%BA%8C%5DCOUNT/" title="MySQL[二十二]COUNT"><img src="/images/cover/mysql.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="MySQL[二十二]COUNT"/></a><div class="content"><a class="title" href="/2022/01/22/MySQL/MySQL%5B%E4%BA%8C%E5%8D%81%E4%BA%8C%5DCOUNT/" title="MySQL[二十二]COUNT">MySQL[二十二]COUNT</a><time datetime="2022-01-21T16:00:00.000Z" title="发表于 2022-01-22 00:00:00">2022-01-22</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/01/21/MySQL/MySQL%5B%E4%BA%8C%E5%8D%81%E4%B8%80%5DLIMIT/" title="MySQL[二十一]LIMIT"><img src="/images/cover/mysql.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="MySQL[二十一]LIMIT"/></a><div class="content"><a class="title" href="/2022/01/21/MySQL/MySQL%5B%E4%BA%8C%E5%8D%81%E4%B8%80%5DLIMIT/" title="MySQL[二十一]LIMIT">MySQL[二十一]LIMIT</a><time datetime="2022-01-20T16:00:00.000Z" title="发表于 2022-01-21 00:00:00">2022-01-21</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/01/20/MySQL/MySQL%5B%E4%BA%8C%E5%8D%81%5D%E6%B5%B7%E9%87%8F%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86%E6%80%BB%E7%BB%93/" title="MySQL[二十]海量数据处理"><img src="/images/cover/mysql.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="MySQL[二十]海量数据处理"/></a><div class="content"><a class="title" href="/2022/01/20/MySQL/MySQL%5B%E4%BA%8C%E5%8D%81%5D%E6%B5%B7%E9%87%8F%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86%E6%80%BB%E7%BB%93/" title="MySQL[二十]海量数据处理">MySQL[二十]海量数据处理</a><time datetime="2022-01-19T16:00:00.000Z" title="发表于 2022-01-20 00:00:00">2022-01-20</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('/images/cover/mysql.png')"><div id="footer-wrap"><div class="copyright">&copy;2021 - 2022 By 二十</div><div class="footer_custom_text">树是生活，埋的是我。看花就好，别看我落魄。</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="font-plus" type="button" title="放大字体"><i class="fas fa-plus"></i></button><button id="font-minus" type="button" title="缩小字体"><i class="fas fa-minus"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div></div><hr/><div id="local-search-results"></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"></div><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/chocolate.js"></script><script defer="defer" id="fluttering_ribbon" mobile="true" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-fluttering-ribbon.min.js"></script><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="true" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-nest.min.js"></script><script id="click-show-text" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/click-show-text.min.js" data-mobile="false" data-text="二十,二十二十,二十二十二十,二十二十二十二十,二十二十二十二十二十" data-fontsize="15px" data-random="true" async="async"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>